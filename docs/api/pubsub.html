

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Publish/Subscribe API &#8212; Vector SIL Kit 4.0.5 documentation</title>
    <link rel="stylesheet" href="../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="RPC (Remote Procedure Call) API" href="rpc.html" />
    <link rel="prev" title="Ethernet Service API" href="ethernet.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="rpc.html" title="RPC (Remote Procedure Call) API"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ethernet.html" title="Ethernet Service API"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../contents.html">Vector SIL Kit 4.0.5 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="api.html" accesskey="U">API</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Data Publish/Subscribe API</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="data-publish-subscribe-api">
<h1>Data Publish/Subscribe API<a class="headerlink" href="#data-publish-subscribe-api" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#using-the-data-publish-subscribe-api" id="id2">Using the Data Publish/Subscribe API</a><ul>
<li><a class="reference internal" href="#topics" id="id3">Topics</a></li>
<li><a class="reference internal" href="#media-type" id="id4">Media Type</a></li>
<li><a class="reference internal" href="#labels" id="id5">Labels</a></li>
<li><a class="reference internal" href="#history" id="id6">History</a></li>
<li><a class="reference internal" href="#configuration" id="id7">Configuration</a></li>
<li><a class="reference internal" href="#usage-examples" id="id8">Usage Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#api-and-data-type-reference" id="id9">API and Data Type Reference</a><ul>
<li><a class="reference internal" href="#data-publisher-api" id="id10">Data Publisher API</a></li>
<li><a class="reference internal" href="#data-subscriber-api" id="id11">Data Subscriber API</a></li>
<li><a class="reference internal" href="#data-structures" id="id12">Data Structures</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="using-the-data-publish-subscribe-api">
<h2><a class="toc-backref" href="#id2">Using the Data Publish/Subscribe API</a><a class="headerlink" href="#using-the-data-publish-subscribe-api" title="Permalink to this headline">¶</a></h2>
<p>The Data Publish/Subscribe API provides a topic-based publish/subscribe mechanism to exchange plain byte vectors
containing arbitrary user data. The DataPublisher and DataSubscriber interfaces are instantiated from an <a class="reference internal" href="participant.html#_CPPv4N6SilKit12IParticipantE" title="SilKit::IParticipant"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">IParticipant</span></code></a>
interface by calling <a class="reference internal" href="participant.html#_CPPv4N6SilKit12IParticipant19CreateDataPublisherERKNSt6stringERKN6SilKit8Services6PubSub10PubSubSpecE6size_t" title="SilKit::IParticipant::CreateDataPublisher"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">CreateDataPublisher()</span></code></a> and <a class="reference internal" href="participant.html#_CPPv4N6SilKit12IParticipant20CreateDataSubscriberERKNSt6stringERKN6SilKit8Services6PubSub10PubSubSpecEN8Services6PubSub18DataMessageHandlerE" title="SilKit::IParticipant::CreateDataSubscriber"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">CreateDataSubscriber()</span></code></a>, respectively.</p>
<p>Data can be transmitted using the <a class="reference internal" href="#_CPPv4N6SilKit8Services6PubSub14IDataPublisher7PublishEN4Util4SpanIK7uint8_tEE" title="SilKit::Services::PubSub::IDataPublisher::Publish"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Publish()</span></code></a> method of a DataPublisher, either providing a standard vector of data or a
data pointer and size. Published messages are transmitted immediately to all matching subscribers, that is, without
any modelled latency. DataSubscribers provide a handler that is called upon incoming data on their topic.</p>
<div class="section" id="topics">
<h3><a class="toc-backref" href="#id3">Topics</a><a class="headerlink" href="#topics" title="Permalink to this headline">¶</a></h3>
<p>DataPublishers and DataSubscribers provide a topic name which is part of their <a class="reference internal" href="#_CPPv4N6SilKit8Services6PubSub10PubSubSpecE" title="SilKit::Services::PubSub::PubSubSpec"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">PubSubSpec</span></code></a>.
Communications only takes place among controllers with the same topic. The topic has no wildcard functionality.</p>
</div>
<div class="section" id="media-type">
<h3><a class="toc-backref" href="#id4">Media Type</a><a class="headerlink" href="#media-type" title="Permalink to this headline">¶</a></h3>
<p>Both DataPublishers and DataSubscribers define a media type as part of their <a class="reference internal" href="#_CPPv4N6SilKit8Services6PubSub10PubSubSpecE" title="SilKit::Services::PubSub::PubSubSpec"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">PubSubSpec</span></code></a>. It is a meta description
of the transmitted data in accordance to <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc2046">RFC2046</a> and should be used
to provide infomation about the de-/serialization of the underlying user data. Just like the topic, the media type has
to match between DataPublishers/DataSubscribers for communicaiton to take place. An empty string on a DataSubscriber
is a wildcard and will match any other media type of a DataPublisher. DataPublishers should provide information
about the data they are going to publish and have no wildcard functionality for the media type.</p>
</div>
<div class="section" id="labels">
<h3><a class="toc-backref" href="#id5">Labels</a><a class="headerlink" href="#labels" title="Permalink to this headline">¶</a></h3>
<p>Both DataPublishers and DataSubscribers can be annotated with string-based key-value pairs (labels) which can be either
mandatory or optional. In addition to the matching requirements given by topic and mediaType, DataPublishers and
DataSubscribers will only communicate if their labels conform to the following matching rules:</p>
<ul class="simple">
<li>A mandatory label matches, if a label of the same key and value is found on the corresponding counterpart.</li>
<li>An optional label matches, if the label key does not exist on the counterpart or both its key and value are equal.</li>
</ul>
<p>The following table shows how DataPublishers and DataSubscribers with matching topics and matching media type would
match corresponding to their labels. Note that the label matching is symmetric, so publishers and subscribers
are interchangeable here.</p>
<table border="1" class="docutils" id="id1">
<caption><span class="caption-number">Table 3 </span><span class="caption-text">Label combinations</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">Subscriber {“KeyA”, “Val1”, Optional}</th>
<th class="head">Subscriber{“KeyA”, “Val1”, Mandatory}</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Publisher {}</td>
<td>Match</td>
<td>No Match</td>
</tr>
<tr class="row-odd"><td>Publisher {“KeyA”, “Val1”, Optional}</td>
<td>Match</td>
<td>Match</td>
</tr>
<tr class="row-even"><td>Publisher {“KeyA”, “Val2”, Optional}</td>
<td>No Match</td>
<td>No Match</td>
</tr>
<tr class="row-odd"><td>Publisher {“KeyB”, “Val1”, Optional}</td>
<td>Match</td>
<td>No Match</td>
</tr>
<tr class="row-even"><td>Publisher {“KeyB”, “Val1”, Mandatory}</td>
<td>No Match</td>
<td>No Match</td>
</tr>
</tbody>
</table>
<p>The labels are stored in the <a class="reference internal" href="#_CPPv4N6SilKit8Services6PubSub10PubSubSpecE" title="SilKit::Services::PubSub::PubSubSpec"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">PubSubSpec</span></code></a>. A <a class="reference internal" href="common.html#_CPPv4N6SilKit8Services13MatchingLabelE" title="SilKit::Services::MatchingLabel"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">MatchingLabel</span></code></a> can be added via <a class="reference internal" href="#_CPPv4N6SilKit8Services6PubSub10PubSubSpec8AddLabelERKN6SilKit8Services13MatchingLabelE" title="SilKit::Services::PubSub::PubSubSpec::AddLabel"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">AddLabel()</span></code></a>,
see the following code snippet:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">SilKit</span><span class="o">::</span><span class="n">Services</span><span class="o">::</span><span class="n">PubSub</span><span class="o">::</span><span class="n">PubSubSpec</span> <span class="n">subDataSpec</span><span class="p">{</span><span class="s">&quot;Topic1&quot;</span><span class="p">,</span> <span class="s">&quot;application/json&quot;</span><span class="p">};</span>
<span class="n">subDataSpec</span><span class="p">.</span><span class="n">AddLabel</span><span class="p">(</span><span class="s">&quot;KeyA&quot;</span><span class="p">,</span> <span class="s">&quot;ValA&quot;</span><span class="p">,</span> <span class="n">SilKit</span><span class="o">::</span><span class="n">Services</span><span class="o">::</span><span class="n">MatchingLabel</span><span class="o">::</span><span class="n">Kind</span><span class="o">::</span><span class="n">Optional</span><span class="p">);</span>
<span class="k">auto</span><span class="o">*</span> <span class="n">subscriber</span> <span class="o">=</span> <span class="n">participant</span><span class="o">-&gt;</span><span class="n">CreateDataSubscriber</span><span class="p">(</span><span class="s">&quot;SubCtrl1&quot;</span><span class="p">,</span> <span class="n">subDataSpec</span><span class="p">,</span> <span class="n">defaultDataHandler</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="history">
<h3><a class="toc-backref" href="#id6">History</a><a class="headerlink" href="#history" title="Permalink to this headline">¶</a></h3>
<p>DataPublishers additionally specify a history length N (restricted to 0 or 1). DataSubscribers that are created after a
publication will still receive the N historic Data Messages from a DataPublisher with history &gt; 0. Note that the
particiant that created the DataPublisher still has to be connected to the distributed simulation for the historic
messages to be delivered.</p>
</div>
<div class="section" id="configuration">
<h3><a class="toc-backref" href="#id7">Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h3>
<p>The controller name passed in <a class="reference internal" href="participant.html#_CPPv4N6SilKit12IParticipant19CreateDataPublisherERKNSt6stringERKN6SilKit8Services6PubSub10PubSubSpecE6size_t" title="SilKit::IParticipant::CreateDataPublisher"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">CreateDataPublisher()</span></code></a> and <a class="reference internal" href="participant.html#_CPPv4N6SilKit12IParticipant20CreateDataSubscriberERKNSt6stringERKN6SilKit8Services6PubSub10PubSubSpecEN8Services6PubSub18DataMessageHandlerE" title="SilKit::IParticipant::CreateDataSubscriber"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">CreateDataSubscriber()</span></code></a> is used to identify the controller in
a YAML/JSON configuration. Currently, only the topic can be configured. If a topic is set in the configuration, it will
be preferred over a programmatically set topic.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">ParticipantName</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Participant1</span>
<span class="l l-Scalar l-Scalar-Plain">DataPublishers</span><span class="p p-Indicator">:</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">Name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">DataPublisherController1</span>
  <span class="l l-Scalar l-Scalar-Plain">Topic</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">TopicA</span>
<span class="l l-Scalar l-Scalar-Plain">DataSubscribers</span><span class="p p-Indicator">:</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">Name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">DataSubscriberController1</span>
  <span class="l l-Scalar l-Scalar-Plain">Topic</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">TopicB</span>
</pre></div>
</div>
</div>
<div class="section" id="usage-examples">
<h3><a class="toc-backref" href="#id8">Usage Examples</a><a class="headerlink" href="#usage-examples" title="Permalink to this headline">¶</a></h3>
<p>The interfaces for the publish/subscribe mechanism can be instantiated from an IParticipant:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Participant1 (Publisher)</span>
<span class="c1">// ------------------------</span>
<span class="n">SilKit</span><span class="o">::</span><span class="n">Services</span><span class="o">::</span><span class="n">PubSub</span><span class="o">::</span><span class="n">PubSubSpec</span> <span class="n">pubDataSpec</span><span class="p">{</span><span class="s">&quot;Topic1&quot;</span><span class="p">,</span> <span class="s">&quot;application/json&quot;</span><span class="p">};</span>
<span class="n">pubDataSpec</span><span class="p">.</span><span class="n">AddLabel</span><span class="p">(</span><span class="s">&quot;KeyA&quot;</span><span class="p">,</span> <span class="s">&quot;ValA&quot;</span><span class="p">);</span>
<span class="k">auto</span><span class="o">*</span> <span class="n">publisher</span> <span class="o">=</span> <span class="n">participant</span><span class="o">-&gt;</span><span class="n">CreateDataPublisher</span><span class="p">(</span><span class="s">&quot;PubCtrl1&quot;</span><span class="p">,</span> <span class="n">pubDataSpec</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="n">publisher</span><span class="o">-&gt;</span><span class="n">Publish</span><span class="p">(</span><span class="n">user_data</span><span class="p">);</span>

<span class="c1">// Participant2 (Subscriber)</span>
<span class="c1">// -------------------------</span>

<span class="k">auto</span> <span class="n">defaultDataHandler</span> <span class="o">=</span> <span class="p">[](</span><span class="n">IDataSubscriber</span><span class="o">*</span> <span class="n">subscriber</span><span class="p">,</span> <span class="k">const</span> <span class="n">DataMessageEvent</span><span class="o">&amp;</span> <span class="n">dataMessageEvent</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// publication timestamp in dataMessageEvent.timestamp</span>
    <span class="c1">// raw data in dataMessageEvent.data</span>
<span class="p">});</span>
<span class="n">SilKit</span><span class="o">::</span><span class="n">Services</span><span class="o">::</span><span class="n">PubSub</span><span class="o">::</span><span class="n">PubSubSpec</span> <span class="n">subDataSpec</span><span class="p">{</span><span class="s">&quot;Topic1&quot;</span><span class="p">,</span> <span class="s">&quot;application/json&quot;</span><span class="p">};</span>
<span class="n">subDataSpec</span><span class="p">.</span><span class="n">AddLabel</span><span class="p">(</span><span class="s">&quot;KeyA&quot;</span><span class="p">,</span> <span class="s">&quot;ValA&quot;</span><span class="p">,</span> <span class="n">SilKit</span><span class="o">::</span><span class="n">Services</span><span class="o">::</span><span class="n">MatchingLabel</span><span class="o">::</span><span class="n">Kind</span><span class="o">::</span><span class="n">Optional</span><span class="p">);</span>
<span class="k">auto</span><span class="o">*</span> <span class="n">subscriber</span> <span class="o">=</span> <span class="n">participant</span><span class="o">-&gt;</span><span class="n">CreateDataSubscriber</span><span class="p">(</span><span class="s">&quot;SubCtrl1&quot;</span><span class="p">,</span> <span class="n">subDataSpec</span><span class="p">,</span> <span class="n">defaultDataHandler</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="api-and-data-type-reference">
<h2><a class="toc-backref" href="#id9">API and Data Type Reference</a><a class="headerlink" href="#api-and-data-type-reference" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="#_CPPv4N6SilKit8Services6PubSub14IDataPublisherE" title="SilKit::Services::PubSub::IDataPublisher"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">IDataPublisher</span></code></a> provides a simple publish interface for standard vector. An overload for raw data
pointer and size exists for ease of use.</p>
<p>The <a class="reference internal" href="#_CPPv4N6SilKit8Services6PubSub15IDataSubscriberE" title="SilKit::Services::PubSub::IDataSubscriber"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">IDataPublisher</span></code></a> provides a callback registration mechanism for the default callback via
<a class="reference internal" href="#_CPPv4N6SilKit8Services6PubSub15IDataSubscriber21SetDataMessageHandlerE18DataMessageHandler" title="SilKit::Services::PubSub::IDataSubscriber::SetDataMessageHandler"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">SetDataMessageHandler()</span></code></a> and for targeting explicit DataPublishers via <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">AddExplicitDataMessageHandler()</span></code>.</p>
<div class="section" id="data-publisher-api">
<h3><a class="toc-backref" href="#id10">Data Publisher API</a><a class="headerlink" href="#data-publisher-api" title="Permalink to this headline">¶</a></h3>
<dl class="cpp class">
<dt id="_CPPv4N6SilKit8Services6PubSub14IDataPublisherE">
<span id="_CPPv3N6SilKit8Services6PubSub14IDataPublisherE"></span><span id="_CPPv2N6SilKit8Services6PubSub14IDataPublisherE"></span><span id="SilKit::Services::PubSub::IDataPublisher"></span><span class="target" id="class_sil_kit_1_1_services_1_1_pub_sub_1_1_i_data_publisher"></span><em class="property">class </em><code class="descclassname">SilKit::Services::PubSub<code class="descclassname">::</code></code><code class="descname">IDataPublisher</code><a class="headerlink" href="#_CPPv4N6SilKit8Services6PubSub14IDataPublisherE" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="breathe-sectiondef container">
<p class="breathe-sectiondef-title rubric">Public Functions</p>
<dl class="cpp function">
<dt id="_CPPv4N6SilKit8Services6PubSub14IDataPublisher7PublishEN4Util4SpanIK7uint8_tEE">
<span id="_CPPv3N6SilKit8Services6PubSub14IDataPublisher7PublishEN4Util4SpanIK7uint8_tEE"></span><span id="_CPPv2N6SilKit8Services6PubSub14IDataPublisher7PublishEN4Util4SpanIK7uint8_tEE"></span><span id="SilKit::Services::PubSub::IDataPublisher::Publish__Util::Span:uint8_tC:"></span><span class="target" id="class_sil_kit_1_1_services_1_1_pub_sub_1_1_i_data_publisher_1afe274d05378f406f7fc97acd4171cd5f"></span>void <code class="descname">Publish</code><span class="sig-paren">(</span>Util::Span&lt;<em class="property">const</em> uint8_t&gt; <em>data</em><span class="sig-paren">)</span> = 0<a class="headerlink" href="#_CPPv4N6SilKit8Services6PubSub14IDataPublisher7PublishEN4Util4SpanIK7uint8_tEE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Publish a new value. </p>
<p>Convenience method to publish data. Creates a new std::vector with content copied from <code class="docutils literal notranslate"><span class="pre">data</span></code>. For highest efficiency, use <a class="reference internal" href="#class_sil_kit_1_1_services_1_1_pub_sub_1_1_i_data_publisher_1afe274d05378f406f7fc97acd4171cd5f"><span class="std std-ref">Publish(Util::Span&lt;const uint8_t&gt;)</span></a> in combination with std::move.</p>
<p><dl class="docutils">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><code class="docutils literal notranslate"><span class="pre">data</span></code>: A non-owning reference to an opaque block of raw data </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
</dd></dl>

</div>
<div class="section" id="data-subscriber-api">
<h3><a class="toc-backref" href="#id11">Data Subscriber API</a><a class="headerlink" href="#data-subscriber-api" title="Permalink to this headline">¶</a></h3>
<dl class="cpp class">
<dt id="_CPPv4N6SilKit8Services6PubSub15IDataSubscriberE">
<span id="_CPPv3N6SilKit8Services6PubSub15IDataSubscriberE"></span><span id="_CPPv2N6SilKit8Services6PubSub15IDataSubscriberE"></span><span id="SilKit::Services::PubSub::IDataSubscriber"></span><span class="target" id="class_sil_kit_1_1_services_1_1_pub_sub_1_1_i_data_subscriber"></span><em class="property">class </em><code class="descclassname">SilKit::Services::PubSub<code class="descclassname">::</code></code><code class="descname">IDataSubscriber</code><a class="headerlink" href="#_CPPv4N6SilKit8Services6PubSub15IDataSubscriberE" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="breathe-sectiondef container">
<p class="breathe-sectiondef-title rubric">Public Functions</p>
<dl class="cpp function">
<dt id="_CPPv4N6SilKit8Services6PubSub15IDataSubscriber21SetDataMessageHandlerE18DataMessageHandler">
<span id="_CPPv3N6SilKit8Services6PubSub15IDataSubscriber21SetDataMessageHandlerE18DataMessageHandler"></span><span id="_CPPv2N6SilKit8Services6PubSub15IDataSubscriber21SetDataMessageHandlerE18DataMessageHandler"></span><span id="SilKit::Services::PubSub::IDataSubscriber::SetDataMessageHandler__DataMessageHandler"></span><span class="target" id="class_sil_kit_1_1_services_1_1_pub_sub_1_1_i_data_subscriber_1a4cc9e8816b4cd0d99bb03c828057bf00"></span>void <code class="descname">SetDataMessageHandler</code><span class="sig-paren">(</span>DataMessageHandler <em>callback</em><span class="sig-paren">)</span> = 0<a class="headerlink" href="#_CPPv4N6SilKit8Services6PubSub15IDataSubscriber21SetDataMessageHandlerE18DataMessageHandler" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Set the default handler for data reception. </p>
<p>The handler is executed when data is received from a matching publisher. The default handler will not be invoked if a specific is available. </p>
</dd></dl>

</div>
</dd></dl>

</div>
<div class="section" id="data-structures">
<h3><a class="toc-backref" href="#id12">Data Structures</a><a class="headerlink" href="#data-structures" title="Permalink to this headline">¶</a></h3>
<dl class="cpp struct">
<dt id="_CPPv4N6SilKit8Services6PubSub16DataMessageEventE">
<span id="_CPPv3N6SilKit8Services6PubSub16DataMessageEventE"></span><span id="_CPPv2N6SilKit8Services6PubSub16DataMessageEventE"></span><span id="SilKit::Services::PubSub::DataMessageEvent"></span><span class="target" id="struct_sil_kit_1_1_services_1_1_pub_sub_1_1_data_message_event"></span><em class="property">struct </em><code class="descclassname">SilKit::Services::PubSub<code class="descclassname">::</code></code><code class="descname">DataMessageEvent</code><a class="headerlink" href="#_CPPv4N6SilKit8Services6PubSub16DataMessageEventE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>An incoming DataMessage of a DataPublisher containing raw data and timestamp. </p>
<div class="breathe-sectiondef container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="cpp var">
<dt id="_CPPv4N6SilKit8Services6PubSub16DataMessageEvent9timestampE">
<span id="_CPPv3N6SilKit8Services6PubSub16DataMessageEvent9timestampE"></span><span id="_CPPv2N6SilKit8Services6PubSub16DataMessageEvent9timestampE"></span><span id="SilKit::Services::PubSub::DataMessageEvent::timestamp__std::chrono::nanoseconds"></span><span class="target" id="struct_sil_kit_1_1_services_1_1_pub_sub_1_1_data_message_event_1a9badb5e235d79a4d227077c05086c78d"></span>std::chrono::nanoseconds <code class="descname">timestamp</code><a class="headerlink" href="#_CPPv4N6SilKit8Services6PubSub16DataMessageEvent9timestampE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Send timestamp of the event. </p>
</dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N6SilKit8Services6PubSub16DataMessageEvent4dataE">
<span id="_CPPv3N6SilKit8Services6PubSub16DataMessageEvent4dataE"></span><span id="_CPPv2N6SilKit8Services6PubSub16DataMessageEvent4dataE"></span><span id="SilKit::Services::PubSub::DataMessageEvent::data__Util::Span:uint8_tC:"></span><span class="target" id="struct_sil_kit_1_1_services_1_1_pub_sub_1_1_data_message_event_1a474e72a8192006945135ce28154ee5ef"></span>Util::Span&lt;<em class="property">const</em> uint8_t&gt; <code class="descname">data</code><a class="headerlink" href="#_CPPv4N6SilKit8Services6PubSub16DataMessageEvent4dataE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Data field containing the payload. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp class">
<dt id="_CPPv4N6SilKit8Services6PubSub10PubSubSpecE">
<span id="_CPPv3N6SilKit8Services6PubSub10PubSubSpecE"></span><span id="_CPPv2N6SilKit8Services6PubSub10PubSubSpecE"></span><span id="SilKit::Services::PubSub::PubSubSpec"></span><span class="target" id="class_sil_kit_1_1_services_1_1_pub_sub_1_1_pub_sub_spec"></span><em class="property">class </em><code class="descclassname">SilKit::Services::PubSub<code class="descclassname">::</code></code><code class="descname">PubSubSpec</code><a class="headerlink" href="#_CPPv4N6SilKit8Services6PubSub10PubSubSpecE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>The specification of topic, media type and labels for DataPublishers and DataSubscribers. </p>
<div class="breathe-sectiondef container">
<p class="breathe-sectiondef-title rubric">Public Functions</p>
<dl class="cpp function">
<dt id="_CPPv4N6SilKit8Services6PubSub10PubSubSpec10PubSubSpecENSt6stringENSt6stringE">
<span id="_CPPv3N6SilKit8Services6PubSub10PubSubSpec10PubSubSpecENSt6stringENSt6stringE"></span><span id="_CPPv2N6SilKit8Services6PubSub10PubSubSpec10PubSubSpecENSt6stringENSt6stringE"></span><span id="SilKit::Services::PubSub::PubSubSpec::PubSubSpec__ss.ss"></span><span class="target" id="class_sil_kit_1_1_services_1_1_pub_sub_1_1_pub_sub_spec_1a487cfb2244d6ed96047e1debc9320dbd"></span><code class="descname">PubSubSpec</code><span class="sig-paren">(</span>std::string <em>topic</em>, std::string <em>mediaType</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6SilKit8Services6PubSub10PubSubSpec10PubSubSpecENSt6stringENSt6stringE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Construct a <a class="reference internal" href="#class_sil_kit_1_1_services_1_1_pub_sub_1_1_pub_sub_spec"><span class="std std-ref">PubSubSpec</span></a> via topic and mediaType. </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N6SilKit8Services6PubSub10PubSubSpec8AddLabelERKN6SilKit8Services13MatchingLabelE">
<span id="_CPPv3N6SilKit8Services6PubSub10PubSubSpec8AddLabelERKN6SilKit8Services13MatchingLabelE"></span><span id="_CPPv2N6SilKit8Services6PubSub10PubSubSpec8AddLabelERKN6SilKit8Services13MatchingLabelE"></span><span id="SilKit::Services::PubSub::PubSubSpec::AddLabel__SilKit::Services::MatchingLabelCR"></span><span class="target" id="class_sil_kit_1_1_services_1_1_pub_sub_1_1_pub_sub_spec_1a27ff5f8adf1bd78672e0504c266a2b55"></span>void <code class="descname">AddLabel</code><span class="sig-paren">(</span><em class="property">const</em> SilKit::Services::<a class="reference internal" href="common.html#_CPPv4N6SilKit8Services13MatchingLabelE" title="SilKit::Services::MatchingLabel">MatchingLabel</a> &amp;<em>label</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6SilKit8Services6PubSub10PubSubSpec8AddLabelERKN6SilKit8Services13MatchingLabelE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Add a given <a class="reference internal" href="common.html#struct_sil_kit_1_1_services_1_1_matching_label"><span class="std std-ref">MatchingLabel</span></a>. </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N6SilKit8Services6PubSub10PubSubSpec8AddLabelERKNSt6stringERKNSt6stringEN6SilKit8Services13MatchingLabel4KindE">
<span id="_CPPv3N6SilKit8Services6PubSub10PubSubSpec8AddLabelERKNSt6stringERKNSt6stringEN6SilKit8Services13MatchingLabel4KindE"></span><span id="_CPPv2N6SilKit8Services6PubSub10PubSubSpec8AddLabelERKNSt6stringERKNSt6stringEN6SilKit8Services13MatchingLabel4KindE"></span><span id="SilKit::Services::PubSub::PubSubSpec::AddLabel__ssCR.ssCR.SilKit::Services::MatchingLabel::Kind"></span><span class="target" id="class_sil_kit_1_1_services_1_1_pub_sub_1_1_pub_sub_spec_1a26d23f9d04ccafa8d5d6a3521ed7af31"></span>void <code class="descname">AddLabel</code><span class="sig-paren">(</span><em class="property">const</em> std::string &amp;<em>key</em>, <em class="property">const</em> std::string &amp;<em>value</em>, SilKit::Services::<a class="reference internal" href="common.html#_CPPv4N6SilKit8Services13MatchingLabelE" title="SilKit::Services::MatchingLabel">MatchingLabel</a>::<a class="reference internal" href="common.html#_CPPv4N6SilKit8Services13MatchingLabel4KindE" title="SilKit::Services::MatchingLabel::Kind">Kind</a> <em>kind</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6SilKit8Services6PubSub10PubSubSpec8AddLabelERKNSt6stringERKNSt6stringEN6SilKit8Services13MatchingLabel4KindE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Add a <a class="reference internal" href="common.html#struct_sil_kit_1_1_services_1_1_matching_label"><span class="std std-ref">MatchingLabel</span></a> via key, value and matching kind. </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK6SilKit8Services6PubSub10PubSubSpec5TopicEv">
<span id="_CPPv3NK6SilKit8Services6PubSub10PubSubSpec5TopicEv"></span><span id="_CPPv2NK6SilKit8Services6PubSub10PubSubSpec5TopicEv"></span><span id="SilKit::Services::PubSub::PubSubSpec::TopicC"></span><span class="target" id="class_sil_kit_1_1_services_1_1_pub_sub_1_1_pub_sub_spec_1a8eaf3b30d215875e76110dd7f9ca0186"></span>auto <code class="descname">Topic</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em> -&gt; <em class="property">const</em> std::string&amp;<a class="headerlink" href="#_CPPv4NK6SilKit8Services6PubSub10PubSubSpec5TopicEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the topic of the <a class="reference internal" href="#class_sil_kit_1_1_services_1_1_pub_sub_1_1_pub_sub_spec"><span class="std std-ref">PubSubSpec</span></a>. </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK6SilKit8Services6PubSub10PubSubSpec9MediaTypeEv">
<span id="_CPPv3NK6SilKit8Services6PubSub10PubSubSpec9MediaTypeEv"></span><span id="_CPPv2NK6SilKit8Services6PubSub10PubSubSpec9MediaTypeEv"></span><span id="SilKit::Services::PubSub::PubSubSpec::MediaTypeC"></span><span class="target" id="class_sil_kit_1_1_services_1_1_pub_sub_1_1_pub_sub_spec_1aa7253a4d9f0c26e5b2833cdff1b0bb33"></span>auto <code class="descname">MediaType</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em> -&gt; <em class="property">const</em> std::string&amp;<a class="headerlink" href="#_CPPv4NK6SilKit8Services6PubSub10PubSubSpec9MediaTypeEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the media type of the <a class="reference internal" href="#class_sil_kit_1_1_services_1_1_pub_sub_1_1_pub_sub_spec"><span class="std std-ref">PubSubSpec</span></a>. </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK6SilKit8Services6PubSub10PubSubSpec6LabelsEv">
<span id="_CPPv3NK6SilKit8Services6PubSub10PubSubSpec6LabelsEv"></span><span id="_CPPv2NK6SilKit8Services6PubSub10PubSubSpec6LabelsEv"></span><span id="SilKit::Services::PubSub::PubSubSpec::LabelsC"></span><span class="target" id="class_sil_kit_1_1_services_1_1_pub_sub_1_1_pub_sub_spec_1a025b6d855499858a646b5e5a2dada499"></span>auto <code class="descname">Labels</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em> -&gt; <em class="property">const</em> std::vector&lt;SilKit::Services::<a class="reference internal" href="common.html#_CPPv4N6SilKit8Services13MatchingLabelE" title="SilKit::Services::MatchingLabel">MatchingLabel</a>&gt;&amp;<a class="headerlink" href="#_CPPv4NK6SilKit8Services6PubSub10PubSubSpec6LabelsEv" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the labels of the <a class="reference internal" href="#class_sil_kit_1_1_services_1_1_pub_sub_1_1_pub_sub_spec"><span class="std std-ref">PubSubSpec</span></a>. </p>
</dd></dl>

</div>
</dd></dl>

</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="../contents.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Vector SIL Kit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../simulation/simulation.html">Simulation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="api.html">API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="api.html#api-entry-point-and-api-organization">API Entry Point and API Organization</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="api.html#services">Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#c-api">C API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage/demos.html">Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/utilities.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CHANGELOG.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../licenses/license.html">SIL Kit License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../licenses/license.html#third-party-licenses">Third-Party Licenses</a></li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/api/pubsub.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="rpc.html" title="RPC (Remote Procedure Call) API"
             >next</a> |</li>
        <li class="right" >
          <a href="ethernet.html" title="Ethernet Service API"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../contents.html">Vector SIL Kit 4.0.5 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="api.html" >API</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Data Publish/Subscribe API</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright Copyright (c) 2022 Vector Informatik GmbH.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.1.2.
    </div>
  </body>
</html>