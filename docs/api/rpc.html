<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RPC (Remote Procedure Call) API &mdash; Vector SIL Kit 4.0.50 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Data Serialization/Deserialization API" href="serdes.html" />
    <link rel="prev" title="Data Publish/Subscribe API" href="pubsub.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../contents.html" class="icon icon-home"> Vector SIL Kit
          </a>
              <div class="version">
                4.0.50
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Vector SIL Kit Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../for-users/users.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../for-developers/developers.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../simulation/simulation.html">Simulation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="api.html">API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="api.html#api-entry-point-and-api-organization">API Entry Point and API Organization</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="api.html#services">Services</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="logging.html">Logging Service API</a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#vehicle-network-controller">Vehicle Network Controller</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="api.html#data-publish-subscribe-and-rpc">Data Publish/Subscribe and RPC</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="pubsub.html">Data Publish/Subscribe API</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">RPC (Remote Procedure Call) API</a></li>
<li class="toctree-l4"><a class="reference internal" href="serdes.html">Data Serialization/Deserialization API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api.html#state-handling-and-synchronization">State Handling and Synchronization</a></li>
<li class="toctree-l3"><a class="reference internal" href="api.html#common-data-types">Common Data Types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api.html#c-api">C API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage/demos.html">Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../netsim/netsim.html">Custom Network Simulator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/utilities.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../licenses/license.html">SIL Kit License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../licenses/license.html#third-party-licenses">Third-Party Licenses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CHANGELOG.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../contents.html">Vector SIL Kit</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../contents.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="api.html">API</a> &raquo;</li>
      <li>RPC (Remote Procedure Call) API</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/api/rpc.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="rpc-remote-procedure-call-api">
<span id="chap-rpc-service-api"></span><h1>RPC (Remote Procedure Call) API<a class="headerlink" href="#rpc-remote-procedure-call-api" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#using-the-rpc-api" id="id4">Using the RPC API</a></p>
<ul>
<li><p><a class="reference internal" href="#calling-a-remote-procedure" id="id5">Calling a Remote Procedure</a></p></li>
<li><p><a class="reference internal" href="#serving-a-remote-procedure" id="id6">Serving a Remote Procedure</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#usage-examples" id="id7">Usage Examples</a></p>
<ul>
<li><p><a class="reference internal" href="#example-simple-calculator" id="id8">Example: Simple Calculator</a></p>
<ul>
<li><p><a class="reference internal" href="#server-addition" id="id9">Server - Addition</a></p></li>
<li><p><a class="reference internal" href="#client-addition" id="id10">Client - Addition</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#example-rpc-with-guaranteed-call-reception" id="id11">Example: RPC with guaranteed call reception</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id12">Server - Addition</a></p></li>
<li><p><a class="reference internal" href="#id2" id="id13">Client - Addition</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#api-and-data-type-reference" id="id14">API and Data Type Reference</a></p>
<ul>
<li><p><a class="reference internal" href="#rpcclient-api" id="id15">RpcClient API</a></p></li>
<li><p><a class="reference internal" href="#rpcservers-api" id="id16">RpcServers API</a></p></li>
<li><p><a class="reference internal" href="#callback-types" id="id17">Callback Types</a></p></li>
<li><p><a class="reference internal" href="#data-structures" id="id18">Data Structures</a></p></li>
<li><p><a class="reference internal" href="#enumerations" id="id19">Enumerations</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#advanced-usage-and-configuration" id="id20">Advanced Usage and Configuration</a></p>
<ul>
<li><p><a class="reference internal" href="#function-name" id="id21">Function Name</a></p></li>
<li><p><a class="reference internal" href="#media-type" id="id22">Media Type</a></p></li>
<li><p><a class="reference internal" href="#labels" id="id23">Labels</a></p></li>
<li><p><a class="reference internal" href="#error-handling" id="id24">Error handling</a></p></li>
</ul>
</li>
</ul>
</div>
<section id="using-the-rpc-api">
<h2><a class="toc-backref" href="#id4">Using the RPC API</a><a class="headerlink" href="#using-the-rpc-api" title="Permalink to this heading"></a></h2>
<p>This API provides a client-server model for remote calls with serialized argument- and return data.</p>
<section id="calling-a-remote-procedure">
<h3><a class="toc-backref" href="#id5">Calling a Remote Procedure</a><a class="headerlink" href="#calling-a-remote-procedure" title="Permalink to this heading"></a></h3>
<p>The <a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc10IRpcClientE" title="SilKit::Services::Rpc::IRpcClient"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">IRpcClient</span></code></a> is instantiated from an <a class="reference internal" href="participant.html#_CPPv4N6SilKit12IParticipantE" title="SilKit::IParticipant"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">IParticipant</span></code></a> instance by calling the <a class="reference internal" href="participant.html#_CPPv4N6SilKit12IParticipant15CreateRpcClientERKNSt6stringERKN6SilKit8Services3Rpc7RpcSpecEN8Services3Rpc20RpcCallResultHandlerE" title="SilKit::IParticipant::CreateRpcClient"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">CreateRpcClient()</span></code></a> method.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">auto</span><span class="w"> </span><span class="n">rpcCallResultHandler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="p">(</span><span class="n">IRpcClient</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">RpcCallResultEvent</span><span class="o">&amp;</span><span class="w"> </span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">callStatus</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">SilKit</span><span class="o">::</span><span class="n">Services</span><span class="o">::</span><span class="n">Rpc</span><span class="o">::</span><span class="n">RpcCallStatus</span><span class="o">::</span><span class="n">Success</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">SilKit</span><span class="o">::</span><span class="n">Util</span><span class="o">::</span><span class="n">SerDes</span><span class="o">::</span><span class="n">Deserializer</span><span class="w"> </span><span class="n">deserializer</span><span class="p">{</span><span class="n">SilKit</span><span class="o">::</span><span class="n">Util</span><span class="o">::</span><span class="n">ToStdVector</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">resultData</span><span class="p">)};</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;sum is &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">deserializer</span><span class="p">.</span><span class="n">Deserialize</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; with user context &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">event</span><span class="p">.</span><span class="n">userContext</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">SilKit</span><span class="o">::</span><span class="n">Services</span><span class="o">::</span><span class="n">Rpc</span><span class="o">::</span><span class="n">RpcSpec</span><span class="w"> </span><span class="n">rpcSpec</span><span class="p">{</span><span class="s">&quot;Add&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">SilKit</span><span class="o">::</span><span class="n">Util</span><span class="o">::</span><span class="n">SerDes</span><span class="o">::</span><span class="n">MediaTypeRpc</span><span class="p">()};</span>
<span class="k">auto</span><span class="o">*</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">participant</span><span class="o">-&gt;</span><span class="n">CreateRpcClient</span><span class="p">(</span><span class="s">&quot;AddClient&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">rpcSpec</span><span class="p">,</span><span class="w"> </span><span class="n">rpcCallResultHandler</span><span class="p">);</span>
</pre></div>
</div>
<p>Remote procedures are invoked through the <a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc10IRpcClient4CallEN4Util4SpanIK7uint8_tEEPv" title="SilKit::Services::Rpc::IRpcClient::Call"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Call()</span></code></a> method of an <a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc10IRpcClientE" title="SilKit::Services::Rpc::IRpcClient"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">IRpcClient</span></code></a> instance.
The <a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc10IRpcClient4CallEN4Util4SpanIK7uint8_tEEPv" title="SilKit::Services::Rpc::IRpcClient::Call"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Call()</span></code></a> method is non-blocking and allows for later identification of the call through an additional user context pointer (of type <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*</span></code>) which is passed as an optional, second argument and provided in the call return handler.</p>
<p>Additionally, <a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc10IRpcClient15CallWithTimeoutEN4Util4SpanIK7uint8_tEENSt6chrono11nanosecondsEPv" title="SilKit::Services::Rpc::IRpcClient::CallWithTimeout"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">CallWithTimeout()</span></code></a> can be used to trigger calls that have to be replied to within a specified timeout duration.
Otherwise the call will lead to a timeout <a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc18RpcCallResultEventE" title="SilKit::Services::Rpc::RpcCallResultEvent"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">RpcCallResultEvent</span></code></a>.</p>
<p>The <a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc10IRpcClientE" title="SilKit::Services::Rpc::IRpcClient"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">IRpcClient</span></code></a> receives the call result in a callback specified during creation of the <a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc10IRpcClientE" title="SilKit::Services::Rpc::IRpcClient"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">IRpcClient</span></code></a>, and can be overwritten with <a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc10IRpcClient20SetCallResultHandlerE20RpcCallResultHandler" title="SilKit::Services::Rpc::IRpcClient::SetCallResultHandler"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">SetCallReturnHandler()</span></code></a>.
The callback provides the user context pointer passed to <a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc10IRpcClient4CallEN4Util4SpanIK7uint8_tEEPv" title="SilKit::Services::Rpc::IRpcClient::Call"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Call()</span></code></a> or <a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc10IRpcClient15CallWithTimeoutEN4Util4SpanIK7uint8_tEENSt6chrono11nanosecondsEPv" title="SilKit::Services::Rpc::IRpcClient::CallWithTimeout"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">CallWithTimeout()</span></code></a>, the return data, and a call status indicating success or an error during the procedure.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">SilKit</span><span class="o">::</span><span class="n">Util</span><span class="o">::</span><span class="n">SerDes</span><span class="o">::</span><span class="n">Serializer</span><span class="w"> </span><span class="n">serializer</span><span class="p">;</span>
<span class="n">serializer</span><span class="p">.</span><span class="n">BeginStruct</span><span class="p">();</span>
<span class="n">serializer</span><span class="p">.</span><span class="n">Serialize</span><span class="p">(</span><span class="kt">uint32_t</span><span class="p">{</span><span class="mi">31</span><span class="p">},</span><span class="w"> </span><span class="mi">32</span><span class="p">);</span>
<span class="n">serializer</span><span class="p">.</span><span class="n">Serialize</span><span class="p">(</span><span class="kt">uint32_t</span><span class="p">{</span><span class="mi">11</span><span class="p">},</span><span class="w"> </span><span class="mi">32</span><span class="p">);</span>
<span class="n">serializer</span><span class="p">.</span><span class="n">EndStruct</span><span class="p">();</span>

<span class="n">client</span><span class="o">-&gt;</span><span class="n">Call</span><span class="p">(</span><span class="n">serializer</span><span class="p">.</span><span class="n">ReleaseBuffer</span><span class="p">());</span>
</pre></div>
</div>
</section>
<section id="serving-a-remote-procedure">
<h3><a class="toc-backref" href="#id6">Serving a Remote Procedure</a><a class="headerlink" href="#serving-a-remote-procedure" title="Permalink to this heading"></a></h3>
<p>The <a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc10IRpcServerE" title="SilKit::Services::Rpc::IRpcServer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">IRpcServer</span></code></a> is instantiated from an <a class="reference internal" href="participant.html#_CPPv4N6SilKit12IParticipantE" title="SilKit::IParticipant"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">IParticipant</span></code></a> instance by calling the <a class="reference internal" href="participant.html#_CPPv4N6SilKit12IParticipant15CreateRpcServerERKNSt6stringERKN6SilKit8Services3Rpc7RpcSpecEN8Services3Rpc14RpcCallHandlerE" title="SilKit::IParticipant::CreateRpcServer"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">CreateRpcServer()</span></code></a> method.</p>
<p>Any call that arrives at the <a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc10IRpcServerE" title="SilKit::Services::Rpc::IRpcServer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">IRpcServer</span></code></a> is delivered via a callback specified during creation of the <a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc10IRpcServerE" title="SilKit::Services::Rpc::IRpcServer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">IRpcServer</span></code></a>, which can be overwritten using the <a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc10IRpcServer14SetCallHandlerE14RpcCallHandler" title="SilKit::Services::Rpc::IRpcServer::SetCallHandler"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">SetCallHandler()</span></code></a> method.
There, the argument data and call handle are provided and can be processed.</p>
<p>The <a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc10IRpcServerE" title="SilKit::Services::Rpc::IRpcServer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">IRpcServer</span></code></a> must submit the answer to the call at a later point in time with the call handle obtained in the <a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc14RpcCallHandlerE" title="SilKit::Services::Rpc::RpcCallHandler"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">RpcCallHandler</span></code></a> by using the <a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc10IRpcServer12SubmitResultEP14IRpcCallHandleN4Util4SpanIK7uint8_tEE" title="SilKit::Services::Rpc::IRpcServer::SubmitResult"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">SubmitResult()</span></code></a> method providing the return data for the calling <a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc10IRpcClientE" title="SilKit::Services::Rpc::IRpcClient"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">IRpcClient</span></code></a>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">auto</span><span class="w"> </span><span class="n">rpcCallHandler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[](</span><span class="n">IRpcServer</span><span class="o">*</span><span class="w"> </span><span class="n">server</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">RpcCallEvent</span><span class="o">&amp;</span><span class="w"> </span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">SilKit</span><span class="o">::</span><span class="n">Util</span><span class="o">::</span><span class="n">SerDes</span><span class="o">::</span><span class="n">Deserializer</span><span class="w"> </span><span class="n">deserializer</span><span class="p">{</span><span class="n">SilKit</span><span class="o">::</span><span class="n">Util</span><span class="o">::</span><span class="n">ToStdVector</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">argumentData</span><span class="p">)};</span>
<span class="w">    </span><span class="n">deserializer</span><span class="p">.</span><span class="n">BeginStruct</span><span class="p">();</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">lhs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">deserializer</span><span class="p">.</span><span class="n">Deserialize</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">32</span><span class="p">);</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">rhs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">deserializer</span><span class="p">.</span><span class="n">Deserialize</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">32</span><span class="p">);</span>
<span class="w">    </span><span class="n">deserializer</span><span class="p">.</span><span class="n">EndStruct</span><span class="p">();</span>

<span class="w">    </span><span class="n">SilKit</span><span class="o">::</span><span class="n">Util</span><span class="o">::</span><span class="n">SerDes</span><span class="o">::</span><span class="n">Serializer</span><span class="w"> </span><span class="n">serializer</span><span class="p">;</span>
<span class="w">    </span><span class="n">serializer</span><span class="p">.</span><span class="n">Serialize</span><span class="p">(</span><span class="n">lhs</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">rhs</span><span class="p">,</span><span class="w"> </span><span class="mi">32</span><span class="p">);</span>

<span class="w">    </span><span class="n">server</span><span class="o">-&gt;</span><span class="n">SubmitResult</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">callHandle</span><span class="p">,</span><span class="w"> </span><span class="n">serializer</span><span class="p">.</span><span class="n">ReleaseBuffer</span><span class="p">());</span>
<span class="p">};</span>

<span class="n">SilKit</span><span class="o">::</span><span class="n">Services</span><span class="o">::</span><span class="n">Rpc</span><span class="o">::</span><span class="n">RpcSpec</span><span class="w"> </span><span class="n">rpcSpec</span><span class="p">{</span><span class="s">&quot;Add&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">SilKit</span><span class="o">::</span><span class="n">Util</span><span class="o">::</span><span class="n">SerDes</span><span class="o">::</span><span class="n">MediaTypeRpc</span><span class="p">()};</span>
<span class="k">auto</span><span class="o">*</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">participant</span><span class="o">-&gt;</span><span class="n">CreateRpcServer</span><span class="p">(</span><span class="s">&quot;AddServer&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">rpcSpec</span><span class="p">,</span><span class="w"> </span><span class="n">rpcCallHandler</span><span class="p">);</span>
</pre></div>
</div>
<p>Argument and return data is represented as a byte vector, so the serialization schema can be chosen by the user.
Nonetheless, it is highly recommended to use SIL Kit’s <a class="reference internal" href="serdes.html"><span class="doc">Data Serialization/Deserialization API</span></a> to ensure compatibility among all SIL Kit participants.</p>
</section>
</section>
<section id="usage-examples">
<h2><a class="toc-backref" href="#id7">Usage Examples</a><a class="headerlink" href="#usage-examples" title="Permalink to this heading"></a></h2>
<section id="example-simple-calculator">
<h3><a class="toc-backref" href="#id8">Example: Simple Calculator</a><a class="headerlink" href="#example-simple-calculator" title="Permalink to this heading"></a></h3>
<p>In this example, the RPC Server offers a simple function for adding two numbers.
The example shows the usage of the RPC Server / Client and data (de-)serialization.
Note that the availability of the RPC Server is not guaranteed and will depend on the starting order of the two participants.
The next example shows how a coordinated lifecycle can be set up to guarantee the reception of the RPC client call.</p>
<section id="server-addition">
<h4><a class="toc-backref" href="#id9">Server - Addition</a><a class="headerlink" href="#server-addition" title="Permalink to this heading"></a></h4>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">auto</span><span class="w"> </span><span class="n">rpcCallHandler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[](</span><span class="n">IRpcServer</span><span class="o">*</span><span class="w"> </span><span class="n">server</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">RpcCallEvent</span><span class="o">&amp;</span><span class="w"> </span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">SilKit</span><span class="o">::</span><span class="n">Util</span><span class="o">::</span><span class="n">SerDes</span><span class="o">::</span><span class="n">Deserializer</span><span class="w"> </span><span class="n">deserializer</span><span class="p">{</span><span class="n">SilKit</span><span class="o">::</span><span class="n">Util</span><span class="o">::</span><span class="n">ToStdVector</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">argumentData</span><span class="p">)};</span>
<span class="w">    </span><span class="n">deserializer</span><span class="p">.</span><span class="n">BeginStruct</span><span class="p">();</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">lhs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">deserializer</span><span class="p">.</span><span class="n">Deserialize</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">32</span><span class="p">);</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">rhs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">deserializer</span><span class="p">.</span><span class="n">Deserialize</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">32</span><span class="p">);</span>
<span class="w">    </span><span class="n">deserializer</span><span class="p">.</span><span class="n">EndStruct</span><span class="p">();</span>

<span class="w">    </span><span class="n">SilKit</span><span class="o">::</span><span class="n">Util</span><span class="o">::</span><span class="n">SerDes</span><span class="o">::</span><span class="n">Serializer</span><span class="w"> </span><span class="n">serializer</span><span class="p">;</span>
<span class="w">    </span><span class="n">serializer</span><span class="p">.</span><span class="n">Serialize</span><span class="p">(</span><span class="n">lhs</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">rhs</span><span class="p">,</span><span class="w"> </span><span class="mi">32</span><span class="p">);</span>

<span class="w">    </span><span class="n">server</span><span class="o">-&gt;</span><span class="n">SubmitResult</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">callHandle</span><span class="p">,</span><span class="w"> </span><span class="n">serializer</span><span class="p">.</span><span class="n">ReleaseBuffer</span><span class="p">());</span>
<span class="p">};</span>

<span class="n">SilKit</span><span class="o">::</span><span class="n">Services</span><span class="o">::</span><span class="n">Rpc</span><span class="o">::</span><span class="n">RpcSpec</span><span class="w"> </span><span class="n">rpcSpec</span><span class="p">{</span><span class="s">&quot;Add&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">SilKit</span><span class="o">::</span><span class="n">Util</span><span class="o">::</span><span class="n">SerDes</span><span class="o">::</span><span class="n">MediaTypeRpc</span><span class="p">()};</span>
<span class="k">auto</span><span class="o">*</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">participant</span><span class="o">-&gt;</span><span class="n">CreateRpcServer</span><span class="p">(</span><span class="s">&quot;AddServer&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">rpcSpec</span><span class="p">,</span><span class="w"> </span><span class="n">rpcCallHandler</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="client-addition">
<h4><a class="toc-backref" href="#id10">Client - Addition</a><a class="headerlink" href="#client-addition" title="Permalink to this heading"></a></h4>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">auto</span><span class="w"> </span><span class="n">rpcCallResultHandler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="p">(</span><span class="n">IRpcClient</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">RpcCallResultEvent</span><span class="o">&amp;</span><span class="w"> </span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">callStatus</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">SilKit</span><span class="o">::</span><span class="n">Services</span><span class="o">::</span><span class="n">Rpc</span><span class="o">::</span><span class="n">RpcCallStatus</span><span class="o">::</span><span class="n">Success</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">SilKit</span><span class="o">::</span><span class="n">Util</span><span class="o">::</span><span class="n">SerDes</span><span class="o">::</span><span class="n">Deserializer</span><span class="w"> </span><span class="n">deserializer</span><span class="p">{</span><span class="n">SilKit</span><span class="o">::</span><span class="n">Util</span><span class="o">::</span><span class="n">ToStdVector</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">resultData</span><span class="p">)};</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;sum is &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">deserializer</span><span class="p">.</span><span class="n">Deserialize</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">SilKit</span><span class="o">::</span><span class="n">Services</span><span class="o">::</span><span class="n">Rpc</span><span class="o">::</span><span class="n">RpcSpec</span><span class="w"> </span><span class="n">rpcSpec</span><span class="p">{</span><span class="s">&quot;Add&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">SilKit</span><span class="o">::</span><span class="n">Util</span><span class="o">::</span><span class="n">SerDes</span><span class="o">::</span><span class="n">MediaTypeRpc</span><span class="p">()};</span>
<span class="k">auto</span><span class="o">*</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">participant</span><span class="o">-&gt;</span><span class="n">CreateRpcClient</span><span class="p">(</span><span class="s">&quot;AddClient&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">rpcSpec</span><span class="p">,</span><span class="w"> </span><span class="n">rpcCallResultHandler</span><span class="p">);</span>

<span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="mi">1</span><span class="n">s</span><span class="p">);</span>

<span class="n">SilKit</span><span class="o">::</span><span class="n">Util</span><span class="o">::</span><span class="n">SerDes</span><span class="o">::</span><span class="n">Serializer</span><span class="w"> </span><span class="n">serializer</span><span class="p">;</span>
<span class="n">serializer</span><span class="p">.</span><span class="n">BeginStruct</span><span class="p">();</span>
<span class="n">serializer</span><span class="p">.</span><span class="n">Serialize</span><span class="p">(</span><span class="kt">uint32_t</span><span class="p">{</span><span class="mi">31</span><span class="p">},</span><span class="w"> </span><span class="mi">32</span><span class="p">);</span>
<span class="n">serializer</span><span class="p">.</span><span class="n">Serialize</span><span class="p">(</span><span class="kt">uint32_t</span><span class="p">{</span><span class="mi">11</span><span class="p">},</span><span class="w"> </span><span class="mi">32</span><span class="p">);</span>
<span class="n">serializer</span><span class="p">.</span><span class="n">EndStruct</span><span class="p">();</span>

<span class="n">client</span><span class="o">-&gt;</span><span class="n">Call</span><span class="p">(</span><span class="n">serializer</span><span class="p">.</span><span class="n">ReleaseBuffer</span><span class="p">());</span>
</pre></div>
</div>
</section>
</section>
<section id="example-rpc-with-guaranteed-call-reception">
<h3><a class="toc-backref" href="#id11">Example: RPC with guaranteed call reception</a><a class="headerlink" href="#example-rpc-with-guaranteed-call-reception" title="Permalink to this heading"></a></h3>
<p>This example is based on the previous one and includes participant creation and the setup of a <a class="reference internal" href="../simulation/simulation.html#subsubsec-sim-lifecycle-starting-a-simulation"><span class="std std-ref">coordinated lifecycle</span></a>.
This guarantees that the RPC client and server are validly connected at the time the client makes the call.</p>
<section id="id1">
<h4><a class="toc-backref" href="#id12">Server - Addition</a><a class="headerlink" href="#id1" title="Permalink to this heading"></a></h4>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;silkit/SilKit.hpp&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;silkit/services/rpc/all.hpp&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;silkit/services/orchestration/all.hpp&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;silkit/util/serdes/Serialization.hpp&quot;</span>

<span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">SilKit</span><span class="o">::</span><span class="nn">Services</span><span class="o">::</span><span class="nn">Orchestration</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">SilKit</span><span class="o">::</span><span class="nn">Services</span><span class="o">::</span><span class="nn">Rpc</span><span class="p">;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="o">**</span><span class="w"> </span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SilKit</span><span class="o">::</span><span class="n">Config</span><span class="o">::</span><span class="n">ParticipantConfigurationFromString</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">participant</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SilKit</span><span class="o">::</span><span class="n">CreateParticipant</span><span class="p">(</span><span class="n">config</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Server&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;silkit://localhost:8500&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">auto</span><span class="o">*</span><span class="w"> </span><span class="n">lifecycleService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">participant</span><span class="o">-&gt;</span><span class="n">CreateLifecycleService</span><span class="p">({</span><span class="n">OperationMode</span><span class="o">::</span><span class="n">Coordinated</span><span class="p">});</span>

<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">rpcCallHandler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[](</span><span class="n">IRpcServer</span><span class="o">*</span><span class="w"> </span><span class="n">server</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">RpcCallEvent</span><span class="o">&amp;</span><span class="w"> </span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">SilKit</span><span class="o">::</span><span class="n">Util</span><span class="o">::</span><span class="n">SerDes</span><span class="o">::</span><span class="n">Deserializer</span><span class="w"> </span><span class="n">deserializer</span><span class="p">{</span><span class="n">SilKit</span><span class="o">::</span><span class="n">Util</span><span class="o">::</span><span class="n">ToStdVector</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">argumentData</span><span class="p">)};</span>
<span class="w">        </span><span class="n">deserializer</span><span class="p">.</span><span class="n">BeginStruct</span><span class="p">();</span>
<span class="w">        </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">lhs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">deserializer</span><span class="p">.</span><span class="n">Deserialize</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">32</span><span class="p">);</span>
<span class="w">        </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">rhs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">deserializer</span><span class="p">.</span><span class="n">Deserialize</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">32</span><span class="p">);</span>
<span class="w">        </span><span class="n">deserializer</span><span class="p">.</span><span class="n">EndStruct</span><span class="p">();</span>

<span class="w">        </span><span class="n">SilKit</span><span class="o">::</span><span class="n">Util</span><span class="o">::</span><span class="n">SerDes</span><span class="o">::</span><span class="n">Serializer</span><span class="w"> </span><span class="n">serializer</span><span class="p">;</span>
<span class="w">        </span><span class="n">serializer</span><span class="p">.</span><span class="n">Serialize</span><span class="p">(</span><span class="n">lhs</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">rhs</span><span class="p">,</span><span class="w"> </span><span class="mi">32</span><span class="p">);</span>

<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Server function &#39;Add&#39; is called with parameters: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">lhs</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;, &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">rhs</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">        </span><span class="n">server</span><span class="o">-&gt;</span><span class="n">SubmitResult</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">callHandle</span><span class="p">,</span><span class="w"> </span><span class="n">serializer</span><span class="p">.</span><span class="n">ReleaseBuffer</span><span class="p">());</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="n">SilKit</span><span class="o">::</span><span class="n">Services</span><span class="o">::</span><span class="n">Rpc</span><span class="o">::</span><span class="n">RpcSpec</span><span class="w"> </span><span class="n">rpcSpec</span><span class="p">{</span><span class="s">&quot;Add&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">SilKit</span><span class="o">::</span><span class="n">Util</span><span class="o">::</span><span class="n">SerDes</span><span class="o">::</span><span class="n">MediaTypeRpc</span><span class="p">()};</span>
<span class="w">    </span><span class="k">auto</span><span class="o">*</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">participant</span><span class="o">-&gt;</span><span class="n">CreateRpcServer</span><span class="p">(</span><span class="s">&quot;AddServer&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">rpcSpec</span><span class="p">,</span><span class="w"> </span><span class="n">rpcCallHandler</span><span class="p">);</span>

<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">finalStateFuture</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lifecycleService</span><span class="o">-&gt;</span><span class="n">StartLifecycle</span><span class="p">();</span>
<span class="w">    </span><span class="n">finalStateFuture</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id2">
<h4><a class="toc-backref" href="#id13">Client - Addition</a><a class="headerlink" href="#id2" title="Permalink to this heading"></a></h4>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;silkit/SilKit.hpp&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;silkit/services/rpc/all.hpp&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;silkit/services/orchestration/all.hpp&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;silkit/util/serdes/Serialization.hpp&quot;</span>

<span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">SilKit</span><span class="o">::</span><span class="nn">Services</span><span class="o">::</span><span class="nn">Orchestration</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">SilKit</span><span class="o">::</span><span class="nn">Services</span><span class="o">::</span><span class="nn">Rpc</span><span class="p">;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="o">**</span><span class="w"> </span><span class="n">argv</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SilKit</span><span class="o">::</span><span class="n">Config</span><span class="o">::</span><span class="n">ParticipantConfigurationFromString</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">participant</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SilKit</span><span class="o">::</span><span class="n">CreateParticipant</span><span class="p">(</span><span class="n">config</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Client&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;silkit://localhost:8500&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">auto</span><span class="o">*</span><span class="w"> </span><span class="n">lifecycleService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">participant</span><span class="o">-&gt;</span><span class="n">CreateLifecycleService</span><span class="p">({</span><span class="n">OperationMode</span><span class="o">::</span><span class="n">Coordinated</span><span class="p">});</span>

<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">rpcCallResultHandler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[](</span><span class="n">IRpcClient</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">RpcCallResultEvent</span><span class="o">&amp;</span><span class="w"> </span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">callStatus</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">SilKit</span><span class="o">::</span><span class="n">Services</span><span class="o">::</span><span class="n">Rpc</span><span class="o">::</span><span class="n">RpcCallStatus</span><span class="o">::</span><span class="n">Success</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="k">return</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">SilKit</span><span class="o">::</span><span class="n">Util</span><span class="o">::</span><span class="n">SerDes</span><span class="o">::</span><span class="n">Deserializer</span><span class="w"> </span><span class="n">deserializer</span><span class="p">{</span><span class="n">SilKit</span><span class="o">::</span><span class="n">Util</span><span class="o">::</span><span class="n">ToStdVector</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">resultData</span><span class="p">)};</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Client obtained result: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">deserializer</span><span class="p">.</span><span class="n">Deserialize</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="n">SilKit</span><span class="o">::</span><span class="n">Services</span><span class="o">::</span><span class="n">Rpc</span><span class="o">::</span><span class="n">RpcSpec</span><span class="w"> </span><span class="n">rpcSpec</span><span class="p">{</span><span class="s">&quot;Add&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">SilKit</span><span class="o">::</span><span class="n">Util</span><span class="o">::</span><span class="n">SerDes</span><span class="o">::</span><span class="n">MediaTypeRpc</span><span class="p">()};</span>
<span class="w">    </span><span class="k">auto</span><span class="o">*</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">participant</span><span class="o">-&gt;</span><span class="n">CreateRpcClient</span><span class="p">(</span><span class="s">&quot;AddClient&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">rpcSpec</span><span class="p">,</span><span class="w"> </span><span class="n">rpcCallResultHandler</span><span class="p">);</span>

<span class="w">    </span><span class="n">lifecycleService</span><span class="o">-&gt;</span><span class="n">SetCommunicationReadyHandler</span><span class="p">([</span><span class="n">client</span><span class="p">]()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">SilKit</span><span class="o">::</span><span class="n">Util</span><span class="o">::</span><span class="n">SerDes</span><span class="o">::</span><span class="n">Serializer</span><span class="w"> </span><span class="n">serializer</span><span class="p">;</span>
<span class="w">        </span><span class="n">serializer</span><span class="p">.</span><span class="n">BeginStruct</span><span class="p">();</span>
<span class="w">        </span><span class="n">serializer</span><span class="p">.</span><span class="n">Serialize</span><span class="p">(</span><span class="kt">uint32_t</span><span class="p">{</span><span class="mi">31</span><span class="p">},</span><span class="w"> </span><span class="mi">32</span><span class="p">);</span>
<span class="w">        </span><span class="n">serializer</span><span class="p">.</span><span class="n">Serialize</span><span class="p">(</span><span class="kt">uint32_t</span><span class="p">{</span><span class="mi">11</span><span class="p">},</span><span class="w"> </span><span class="mi">32</span><span class="p">);</span>
<span class="w">        </span><span class="n">serializer</span><span class="p">.</span><span class="n">EndStruct</span><span class="p">();</span>

<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Client calls: &#39;Add(31, 11)&#39;&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">        </span><span class="n">client</span><span class="o">-&gt;</span><span class="n">Call</span><span class="p">(</span><span class="n">serializer</span><span class="p">.</span><span class="n">ReleaseBuffer</span><span class="p">());</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">finalStateFuture</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lifecycleService</span><span class="o">-&gt;</span><span class="n">StartLifecycle</span><span class="p">();</span>
<span class="w">    </span><span class="n">finalStateFuture</span><span class="p">.</span><span class="n">get</span><span class="p">();</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="api-and-data-type-reference">
<h2><a class="toc-backref" href="#id14">API and Data Type Reference</a><a class="headerlink" href="#api-and-data-type-reference" title="Permalink to this heading"></a></h2>
<section id="rpcclient-api">
<h3><a class="toc-backref" href="#id15">RpcClient API</a><a class="headerlink" href="#rpcclient-api" title="Permalink to this heading"></a></h3>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc10IRpcClientE">
<span id="_CPPv3N6SilKit8Services3Rpc10IRpcClientE"></span><span id="_CPPv2N6SilKit8Services3Rpc10IRpcClientE"></span><span id="SilKit::Services::Rpc::IRpcClient"></span><span class="target" id="class_sil_kit_1_1_services_1_1_rpc_1_1_i_rpc_client"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">IRpcClient</span></span></span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc10IRpcClientE" title="Permalink to this definition"></a><br /></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc10IRpcClientD0Ev">
<span id="_CPPv3N6SilKit8Services3Rpc10IRpcClientD0Ev"></span><span id="_CPPv2N6SilKit8Services3Rpc10IRpcClientD0Ev"></span><span id="SilKit::Services::Rpc::IRpcClient::~IRpcClient"></span><span class="target" id="class_sil_kit_1_1_services_1_1_rpc_1_1_i_rpc_client_1aba37c3ffe33c22063b3e37a537553bbd"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">~IRpcClient</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">default</span></span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc10IRpcClientD0Ev" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc10IRpcClient4CallEN4Util4SpanIK7uint8_tEEPv">
<span id="_CPPv3N6SilKit8Services3Rpc10IRpcClient4CallEN4Util4SpanIK7uint8_tEEPv"></span><span id="_CPPv2N6SilKit8Services3Rpc10IRpcClient4CallEN4Util4SpanIK7uint8_tEEPv"></span><span id="SilKit::Services::Rpc::IRpcClient::Call__Util::Span:uint8_tC:.voidP"></span><span class="target" id="class_sil_kit_1_1_services_1_1_rpc_1_1_i_rpc_client_1a000c8ed57b202304a4959b181f14ca51"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Call</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">Util</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">Span</span></span><span class="p"><span class="pre">&lt;</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">data</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">userContext</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc10IRpcClient4CallEN4Util4SpanIK7uint8_tEEPv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Initiate a remote procedure call. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – A non-owning reference to an opaque block of raw data </p></li>
<li><p><strong>userContext</strong> – An optional user provided pointer that is reobtained when receiving the call result. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc10IRpcClient20SetCallResultHandlerE20RpcCallResultHandler">
<span id="_CPPv3N6SilKit8Services3Rpc10IRpcClient20SetCallResultHandlerE20RpcCallResultHandler"></span><span id="_CPPv2N6SilKit8Services3Rpc10IRpcClient20SetCallResultHandlerE20RpcCallResultHandler"></span><span id="SilKit::Services::Rpc::IRpcClient::SetCallResultHandler__RpcCallResultHandler"></span><span class="target" id="class_sil_kit_1_1_services_1_1_rpc_1_1_i_rpc_client_1aa2319a20175bec425d87df2fba6e46fd"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">SetCallResultHandler</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc20RpcCallResultHandlerE" title="SilKit::Services::Rpc::RpcCallResultHandler"><span class="n"><span class="pre">RpcCallResultHandler</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">handler</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc10IRpcClient20SetCallResultHandlerE20RpcCallResultHandler" title="Permalink to this definition"></a><br /></dt>
<dd><p>Overwrite the call return handler of this client. </p>
<p>The signature of the handler is void(IRpcClient* client, RpcCallResultEvent event).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>handler</strong> – A std::function with the above signature </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc10IRpcClient15CallWithTimeoutEN4Util4SpanIK7uint8_tEENSt6chrono11nanosecondsEPv">
<span id="_CPPv3N6SilKit8Services3Rpc10IRpcClient15CallWithTimeoutEN4Util4SpanIK7uint8_tEENSt6chrono11nanosecondsEPv"></span><span id="_CPPv2N6SilKit8Services3Rpc10IRpcClient15CallWithTimeoutEN4Util4SpanIK7uint8_tEENSt6chrono11nanosecondsEPv"></span><span id="SilKit::Services::Rpc::IRpcClient::CallWithTimeout__Util::Span:uint8_tC:.std::chrono::nanoseconds.voidP"></span><span class="target" id="class_sil_kit_1_1_services_1_1_rpc_1_1_i_rpc_client_1aa66348875b516eb14b9b53a14d7534d1"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">CallWithTimeout</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">Util</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">Span</span></span><span class="p"><span class="pre">&lt;</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">data</span></span>, <span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">chrono</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">nanoseconds</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">timeout</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">userContext</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">nullptr</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc10IRpcClient15CallWithTimeoutEN4Util4SpanIK7uint8_tEENSt6chrono11nanosecondsEPv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Initiate a remote procedure call with a specified timeout. </p>
<p>In a synchronized execution, simulation time is used for the timeout, in an unsynchronized execution, system time is used for the timeout. If a timeout occurs the CallResultHandler is called with status timeout. After the timeout occurred, no further call result events will be triggered for this call.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – A non-owning reference to an opaque block of raw data </p></li>
<li><p><strong>timeout</strong> – A duration in nanoseconds after which the call runs into a timeout and is canceled </p></li>
<li><p><strong>userContext</strong> – An optional user provided pointer that is reobtained when receiving the call result. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="rpcservers-api">
<h3><a class="toc-backref" href="#id16">RpcServers API</a><a class="headerlink" href="#rpcservers-api" title="Permalink to this heading"></a></h3>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc10IRpcServerE">
<span id="_CPPv3N6SilKit8Services3Rpc10IRpcServerE"></span><span id="_CPPv2N6SilKit8Services3Rpc10IRpcServerE"></span><span id="SilKit::Services::Rpc::IRpcServer"></span><span class="target" id="class_sil_kit_1_1_services_1_1_rpc_1_1_i_rpc_server"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">IRpcServer</span></span></span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc10IRpcServerE" title="Permalink to this definition"></a><br /></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc10IRpcServerD0Ev">
<span id="_CPPv3N6SilKit8Services3Rpc10IRpcServerD0Ev"></span><span id="_CPPv2N6SilKit8Services3Rpc10IRpcServerD0Ev"></span><span id="SilKit::Services::Rpc::IRpcServer::~IRpcServer"></span><span class="target" id="class_sil_kit_1_1_services_1_1_rpc_1_1_i_rpc_server_1a5f4063be0cdad7b80de93c10f717908a"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">~IRpcServer</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">default</span></span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc10IRpcServerD0Ev" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc10IRpcServer12SubmitResultEP14IRpcCallHandleN4Util4SpanIK7uint8_tEE">
<span id="_CPPv3N6SilKit8Services3Rpc10IRpcServer12SubmitResultEP14IRpcCallHandleN4Util4SpanIK7uint8_tEE"></span><span id="_CPPv2N6SilKit8Services3Rpc10IRpcServer12SubmitResultEP14IRpcCallHandleN4Util4SpanIK7uint8_tEE"></span><span id="SilKit::Services::Rpc::IRpcServer::SubmitResult__IRpcCallHandleP.Util::Span:uint8_tC:"></span><span class="target" id="class_sil_kit_1_1_services_1_1_rpc_1_1_i_rpc_server_1a4ebc58672580b68b54867e112a456118"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">SubmitResult</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">IRpcCallHandle</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">callHandle</span></span>, <span class="n"><span class="pre">Util</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">Span</span></span><span class="p"><span class="pre">&lt;</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">resultData</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc10IRpcServer12SubmitResultEP14IRpcCallHandleN4Util4SpanIK7uint8_tEE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Answers an already received call from remote with arbitrary data. </p>
<p>Using the call handle obtained in the call handler, the result is send back to the calling client. This can happen directly in the call handler or at a later point in time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>callHandle</strong> – A unique identifier of this call </p></li>
<li><p><strong>resultData</strong> – The byte vector to be returned to the client </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc10IRpcServer14SetCallHandlerE14RpcCallHandler">
<span id="_CPPv3N6SilKit8Services3Rpc10IRpcServer14SetCallHandlerE14RpcCallHandler"></span><span id="_CPPv2N6SilKit8Services3Rpc10IRpcServer14SetCallHandlerE14RpcCallHandler"></span><span id="SilKit::Services::Rpc::IRpcServer::SetCallHandler__RpcCallHandler"></span><span class="target" id="class_sil_kit_1_1_services_1_1_rpc_1_1_i_rpc_server_1a7123815c6618d166a56c6acdac523617"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">SetCallHandler</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc14RpcCallHandlerE" title="SilKit::Services::Rpc::RpcCallHandler"><span class="n"><span class="pre">RpcCallHandler</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">handler</span></span><span class="sig-paren">)</span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="m"><span class="pre">0</span></span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc10IRpcServer14SetCallHandlerE14RpcCallHandler" title="Permalink to this definition"></a><br /></dt>
<dd><p>Overwrite the call handler of this server. </p>
<p>The signature of the call handler is void(IRpcServer* server, RpcCallEvent event).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>handler</strong> – A std::function with the above signature </p>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="callback-types">
<h3><a class="toc-backref" href="#id17">Callback Types</a><a class="headerlink" href="#callback-types" title="Permalink to this heading"></a></h3>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc14RpcCallHandlerE">
<span id="_CPPv3N6SilKit8Services3Rpc14RpcCallHandlerE"></span><span id="_CPPv2N6SilKit8Services3Rpc14RpcCallHandlerE"></span><span class="target" id="namespace_sil_kit_1_1_services_1_1_rpc_1a78d20cab9fa8ca53c21d2a0e9f0f4e74"></span><span class="k"><span class="pre">using</span></span><span class="w"> </span><span class="sig-prename descclassname"><span class="n"><span class="pre">SilKit</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">Services</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">Rpc</span></span><span class="p"><span class="pre">::</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">RpcCallHandler</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">function</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">void</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc10IRpcServerE" title="SilKit::Services::Rpc::IRpcServer"><span class="n"><span class="pre">IRpcServer</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">server</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc12RpcCallEventE" title="SilKit::Services::Rpc::RpcCallEvent"><span class="n"><span class="pre">RpcCallEvent</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n"><span class="pre">event</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">&gt;</span></span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc14RpcCallHandlerE" title="Permalink to this definition"></a><br /></dt>
<dd><p>The callback function invoked when a call is to be handled by the <a class="reference internal" href="#class_sil_kit_1_1_services_1_1_rpc_1_1_i_rpc_server"><span class="std std-ref">IRpcServer</span></a>. </p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc20RpcCallResultHandlerE">
<span id="_CPPv3N6SilKit8Services3Rpc20RpcCallResultHandlerE"></span><span id="_CPPv2N6SilKit8Services3Rpc20RpcCallResultHandlerE"></span><span class="target" id="namespace_sil_kit_1_1_services_1_1_rpc_1a1f1dd3242932f41d00a5c001923a087e"></span><span class="k"><span class="pre">using</span></span><span class="w"> </span><span class="sig-prename descclassname"><span class="n"><span class="pre">SilKit</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">Services</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">Rpc</span></span><span class="p"><span class="pre">::</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">RpcCallResultHandler</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">function</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">void</span></span><span class="p"><span class="pre">(</span></span><a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc10IRpcClientE" title="SilKit::Services::Rpc::IRpcClient"><span class="n"><span class="pre">IRpcClient</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">client</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc18RpcCallResultEventE" title="SilKit::Services::Rpc::RpcCallResultEvent"><span class="n"><span class="pre">RpcCallResultEvent</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n"><span class="pre">event</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">&gt;</span></span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc20RpcCallResultHandlerE" title="Permalink to this definition"></a><br /></dt>
<dd><p>The callback function invoked when a call result is delivered to the <a class="reference internal" href="#class_sil_kit_1_1_services_1_1_rpc_1_1_i_rpc_client"><span class="std std-ref">IRpcClient</span></a>. </p>
</dd></dl>

</section>
<section id="data-structures">
<h3><a class="toc-backref" href="#id18">Data Structures</a><a class="headerlink" href="#data-structures" title="Permalink to this heading"></a></h3>
<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc12RpcCallEventE">
<span id="_CPPv3N6SilKit8Services3Rpc12RpcCallEventE"></span><span id="_CPPv2N6SilKit8Services3Rpc12RpcCallEventE"></span><span id="SilKit::Services::Rpc::RpcCallEvent"></span><span class="target" id="struct_sil_kit_1_1_services_1_1_rpc_1_1_rpc_call_event"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">RpcCallEvent</span></span></span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc12RpcCallEventE" title="Permalink to this definition"></a><br /></dt>
<dd><p>An incoming rpc call from a RpcClient with call data and timestamp. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc12RpcCallEvent9timestampE">
<span id="_CPPv3N6SilKit8Services3Rpc12RpcCallEvent9timestampE"></span><span id="_CPPv2N6SilKit8Services3Rpc12RpcCallEvent9timestampE"></span><span id="SilKit::Services::Rpc::RpcCallEvent::timestamp__std::chrono::nanoseconds"></span><span class="target" id="struct_sil_kit_1_1_services_1_1_rpc_1_1_rpc_call_event_1a9812b448d91058af59570ca95629ca09"></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">chrono</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">nanoseconds</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">timestamp</span></span></span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc12RpcCallEvent9timestampE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Send timestamp of the event. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc12RpcCallEvent10callHandleE">
<span id="_CPPv3N6SilKit8Services3Rpc12RpcCallEvent10callHandleE"></span><span id="_CPPv2N6SilKit8Services3Rpc12RpcCallEvent10callHandleE"></span><span id="SilKit::Services::Rpc::RpcCallEvent::callHandle__IRpcCallHandleP"></span><span class="target" id="struct_sil_kit_1_1_services_1_1_rpc_1_1_rpc_call_event_1a6301e7a08ad82feac6dff648b093b779"></span><span class="n"><span class="pre">IRpcCallHandle</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">callHandle</span></span></span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc12RpcCallEvent10callHandleE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Handle of the rpc call by which the call can be identified and its result can be submitted. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc12RpcCallEvent12argumentDataE">
<span id="_CPPv3N6SilKit8Services3Rpc12RpcCallEvent12argumentDataE"></span><span id="_CPPv2N6SilKit8Services3Rpc12RpcCallEvent12argumentDataE"></span><span id="SilKit::Services::Rpc::RpcCallEvent::argumentData__Util::Span:uint8_tC:"></span><span class="target" id="struct_sil_kit_1_1_services_1_1_rpc_1_1_rpc_call_event_1a1b697e1443103ac4add9243c82761e1f"></span><span class="n"><span class="pre">Util</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">Span</span></span><span class="p"><span class="pre">&lt;</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">argumentData</span></span></span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc12RpcCallEvent12argumentDataE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Data of the rpc call as provided by the client on call. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc18RpcCallResultEventE">
<span id="_CPPv3N6SilKit8Services3Rpc18RpcCallResultEventE"></span><span id="_CPPv2N6SilKit8Services3Rpc18RpcCallResultEventE"></span><span id="SilKit::Services::Rpc::RpcCallResultEvent"></span><span class="target" id="struct_sil_kit_1_1_services_1_1_rpc_1_1_rpc_call_result_event"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">RpcCallResultEvent</span></span></span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc18RpcCallResultEventE" title="Permalink to this definition"></a><br /></dt>
<dd><p>An incoming rpc call result of a RpcServer containing result data and timestamp. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc18RpcCallResultEvent9timestampE">
<span id="_CPPv3N6SilKit8Services3Rpc18RpcCallResultEvent9timestampE"></span><span id="_CPPv2N6SilKit8Services3Rpc18RpcCallResultEvent9timestampE"></span><span id="SilKit::Services::Rpc::RpcCallResultEvent::timestamp__std::chrono::nanoseconds"></span><span class="target" id="struct_sil_kit_1_1_services_1_1_rpc_1_1_rpc_call_result_event_1a6073e2dc1a9891072624de9994d756d7"></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">chrono</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">nanoseconds</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">timestamp</span></span></span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc18RpcCallResultEvent9timestampE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Send timestamp of the event. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc18RpcCallResultEvent11userContextE">
<span id="_CPPv3N6SilKit8Services3Rpc18RpcCallResultEvent11userContextE"></span><span id="_CPPv2N6SilKit8Services3Rpc18RpcCallResultEvent11userContextE"></span><span id="SilKit::Services::Rpc::RpcCallResultEvent::userContext__voidP"></span><span class="target" id="struct_sil_kit_1_1_services_1_1_rpc_1_1_rpc_call_result_event_1a1bc439b3401a6fb009967d2ca90e13a1"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">userContext</span></span></span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc18RpcCallResultEvent11userContextE" title="Permalink to this definition"></a><br /></dt>
<dd><p>The user context pointer as it was provided when the call was triggered. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc18RpcCallResultEvent10callStatusE">
<span id="_CPPv3N6SilKit8Services3Rpc18RpcCallResultEvent10callStatusE"></span><span id="_CPPv2N6SilKit8Services3Rpc18RpcCallResultEvent10callStatusE"></span><span id="SilKit::Services::Rpc::RpcCallResultEvent::callStatus__RpcCallStatus"></span><span class="target" id="struct_sil_kit_1_1_services_1_1_rpc_1_1_rpc_call_result_event_1a63e57b711c00be98450ad0f17d5c633f"></span><a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc13RpcCallStatusE" title="SilKit::Services::Rpc::RpcCallStatus"><span class="n"><span class="pre">RpcCallStatus</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">callStatus</span></span></span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc18RpcCallResultEvent10callStatusE" title="Permalink to this definition"></a><br /></dt>
<dd><p>The status of the call, resultData is only valid if callStats == <a class="reference internal" href="#namespace_sil_kit_1_1_services_1_1_rpc_1a3b48d16da133323a38bba98c33e6c45da505a83f220c02df2f85c3810cd9ceb38"><span class="std std-ref">RpcCallStatus::Success</span></a>. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc18RpcCallResultEvent10resultDataE">
<span id="_CPPv3N6SilKit8Services3Rpc18RpcCallResultEvent10resultDataE"></span><span id="_CPPv2N6SilKit8Services3Rpc18RpcCallResultEvent10resultDataE"></span><span id="SilKit::Services::Rpc::RpcCallResultEvent::resultData__Util::Span:uint8_tC:"></span><span class="target" id="struct_sil_kit_1_1_services_1_1_rpc_1_1_rpc_call_result_event_1a380dde0099f3445018cad37f12f84a83"></span><span class="n"><span class="pre">Util</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">Span</span></span><span class="p"><span class="pre">&lt;</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">uint8_t</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">resultData</span></span></span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc18RpcCallResultEvent10resultDataE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Data of the rpc call result as provided by the server. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc7RpcSpecE">
<span id="_CPPv3N6SilKit8Services3Rpc7RpcSpecE"></span><span id="_CPPv2N6SilKit8Services3Rpc7RpcSpecE"></span><span id="SilKit::Services::Rpc::RpcSpec"></span><span class="target" id="class_sil_kit_1_1_services_1_1_rpc_1_1_rpc_spec"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">RpcSpec</span></span></span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc7RpcSpecE" title="Permalink to this definition"></a><br /></dt>
<dd><p>The specification of topic, media type and labels for RpcClients and RpcServers. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc7RpcSpec7RpcSpecEv">
<span id="_CPPv3N6SilKit8Services3Rpc7RpcSpec7RpcSpecEv"></span><span id="_CPPv2N6SilKit8Services3Rpc7RpcSpec7RpcSpecEv"></span><span id="SilKit::Services::Rpc::RpcSpec::RpcSpec"></span><span class="target" id="class_sil_kit_1_1_services_1_1_rpc_1_1_rpc_spec_1a7172c909a28d4b1b9f3350fa906d0d57"></span><span class="sig-name descname"><span class="n"><span class="pre">RpcSpec</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">default</span></span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc7RpcSpec7RpcSpecEv" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc7RpcSpec7RpcSpecENSt6stringENSt6stringE">
<span id="_CPPv3N6SilKit8Services3Rpc7RpcSpec7RpcSpecENSt6stringENSt6stringE"></span><span id="_CPPv2N6SilKit8Services3Rpc7RpcSpec7RpcSpecENSt6stringENSt6stringE"></span><span id="SilKit::Services::Rpc::RpcSpec::RpcSpec__ss.ss"></span><span class="target" id="class_sil_kit_1_1_services_1_1_rpc_1_1_rpc_spec_1a2d57fdd3c0aacc8cca31bc45dc95201e"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">RpcSpec</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">string</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">functionName</span></span>, <span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">string</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">mediaType</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc7RpcSpec7RpcSpecENSt6stringENSt6stringE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Construct a <a class="reference internal" href="#class_sil_kit_1_1_services_1_1_rpc_1_1_rpc_spec"><span class="std std-ref">RpcSpec</span></a> via topic and mediaType. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc7RpcSpec8AddLabelERKN6SilKit8Services13MatchingLabelE">
<span id="_CPPv3N6SilKit8Services3Rpc7RpcSpec8AddLabelERKN6SilKit8Services13MatchingLabelE"></span><span id="_CPPv2N6SilKit8Services3Rpc7RpcSpec8AddLabelERKN6SilKit8Services13MatchingLabelE"></span><span id="SilKit::Services::Rpc::RpcSpec::AddLabel__SilKit::Services::MatchingLabelCR"></span><span class="target" id="class_sil_kit_1_1_services_1_1_rpc_1_1_rpc_spec_1a3667fc03d079d93efb64ea5ae8332fa8"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AddLabel</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">SilKit</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">Services</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="common.html#_CPPv4N6SilKit8Services13MatchingLabelE" title="SilKit::Services::MatchingLabel"><span class="n"><span class="pre">MatchingLabel</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">label</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc7RpcSpec8AddLabelERKN6SilKit8Services13MatchingLabelE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Add a given <a class="reference internal" href="common.html#struct_sil_kit_1_1_services_1_1_matching_label"><span class="std std-ref">MatchingLabel</span></a>. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc7RpcSpec8AddLabelERKNSt6stringERKNSt6stringEN6SilKit8Services13MatchingLabel4KindE">
<span id="_CPPv3N6SilKit8Services3Rpc7RpcSpec8AddLabelERKNSt6stringERKNSt6stringEN6SilKit8Services13MatchingLabel4KindE"></span><span id="_CPPv2N6SilKit8Services3Rpc7RpcSpec8AddLabelERKNSt6stringERKNSt6stringEN6SilKit8Services13MatchingLabel4KindE"></span><span id="SilKit::Services::Rpc::RpcSpec::AddLabel__ssCR.ssCR.SilKit::Services::MatchingLabel::Kind"></span><span class="target" id="class_sil_kit_1_1_services_1_1_rpc_1_1_rpc_spec_1ae182ca9d2f7484d9a17695e440654038"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AddLabel</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">string</span></span><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">key</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">string</span></span><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">value</span></span>, <span class="n"><span class="pre">SilKit</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">Services</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="common.html#_CPPv4N6SilKit8Services13MatchingLabelE" title="SilKit::Services::MatchingLabel"><span class="n"><span class="pre">MatchingLabel</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="common.html#_CPPv4N6SilKit8Services13MatchingLabel4KindE" title="SilKit::Services::MatchingLabel::Kind"><span class="n"><span class="pre">Kind</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">kind</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc7RpcSpec8AddLabelERKNSt6stringERKNSt6stringEN6SilKit8Services13MatchingLabel4KindE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Add a <a class="reference internal" href="common.html#struct_sil_kit_1_1_services_1_1_matching_label"><span class="std std-ref">MatchingLabel</span></a> via key, value and matching kind. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6SilKit8Services3Rpc7RpcSpec12FunctionNameEv">
<span id="_CPPv3NK6SilKit8Services3Rpc7RpcSpec12FunctionNameEv"></span><span id="_CPPv2NK6SilKit8Services3Rpc7RpcSpec12FunctionNameEv"></span><span id="SilKit::Services::Rpc::RpcSpec::FunctionNameC"></span><span class="target" id="class_sil_kit_1_1_services_1_1_rpc_1_1_rpc_spec_1a218a2fa099baad1abe9b19a2bd7fadf0"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">auto</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">FunctionName</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="o"><span class="pre">-&gt;</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">string</span></span><span class="p"><span class="pre">&amp;</span></span><a class="headerlink" href="#_CPPv4NK6SilKit8Services3Rpc7RpcSpec12FunctionNameEv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get the topic of the <a class="reference internal" href="#class_sil_kit_1_1_services_1_1_rpc_1_1_rpc_spec"><span class="std std-ref">RpcSpec</span></a>. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6SilKit8Services3Rpc7RpcSpec9MediaTypeEv">
<span id="_CPPv3NK6SilKit8Services3Rpc7RpcSpec9MediaTypeEv"></span><span id="_CPPv2NK6SilKit8Services3Rpc7RpcSpec9MediaTypeEv"></span><span id="SilKit::Services::Rpc::RpcSpec::MediaTypeC"></span><span class="target" id="class_sil_kit_1_1_services_1_1_rpc_1_1_rpc_spec_1add296eaa25eb667369a7e0820fcafa9e"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">auto</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MediaType</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="o"><span class="pre">-&gt;</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">string</span></span><span class="p"><span class="pre">&amp;</span></span><a class="headerlink" href="#_CPPv4NK6SilKit8Services3Rpc7RpcSpec9MediaTypeEv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get the media type of the <a class="reference internal" href="#class_sil_kit_1_1_services_1_1_rpc_1_1_rpc_spec"><span class="std std-ref">RpcSpec</span></a>. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK6SilKit8Services3Rpc7RpcSpec6LabelsEv">
<span id="_CPPv3NK6SilKit8Services3Rpc7RpcSpec6LabelsEv"></span><span id="_CPPv2NK6SilKit8Services3Rpc7RpcSpec6LabelsEv"></span><span id="SilKit::Services::Rpc::RpcSpec::LabelsC"></span><span class="target" id="class_sil_kit_1_1_services_1_1_rpc_1_1_rpc_spec_1a29cd5f49caf3806fc595fa8403bc8c20"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">auto</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Labels</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="o"><span class="pre">-&gt;</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">SilKit</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">Services</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="common.html#_CPPv4N6SilKit8Services13MatchingLabelE" title="SilKit::Services::MatchingLabel"><span class="n"><span class="pre">MatchingLabel</span></span></a><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">&amp;</span></span><a class="headerlink" href="#_CPPv4NK6SilKit8Services3Rpc7RpcSpec6LabelsEv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get the labels of the <a class="reference internal" href="#class_sil_kit_1_1_services_1_1_rpc_1_1_rpc_spec"><span class="std std-ref">RpcSpec</span></a>. </p>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="enumerations">
<h3><a class="toc-backref" href="#id19">Enumerations</a><a class="headerlink" href="#enumerations" title="Permalink to this heading"></a></h3>
<dl class="cpp enum">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc13RpcCallStatusE">
<span id="_CPPv3N6SilKit8Services3Rpc13RpcCallStatusE"></span><span id="_CPPv2N6SilKit8Services3Rpc13RpcCallStatusE"></span><span class="target" id="namespace_sil_kit_1_1_services_1_1_rpc_1a3b48d16da133323a38bba98c33e6c45d"></span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-prename descclassname"><span class="n"><span class="pre">SilKit</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">Services</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">Rpc</span></span><span class="p"><span class="pre">::</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">RpcCallStatus</span></span></span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc13RpcCallStatusE" title="Permalink to this definition"></a><br /></dt>
<dd><p>The status of a <a class="reference internal" href="#struct_sil_kit_1_1_services_1_1_rpc_1_1_rpc_call_result_event"><span class="std std-ref">RpcCallResultEvent</span></a>. Informs whether a call was successful. </p>
<p><em>Values:</em></p>
<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc13RpcCallStatus7SuccessE">
<span id="_CPPv3N6SilKit8Services3Rpc13RpcCallStatus7SuccessE"></span><span id="_CPPv2N6SilKit8Services3Rpc13RpcCallStatus7SuccessE"></span><span class="target" id="namespace_sil_kit_1_1_services_1_1_rpc_1a3b48d16da133323a38bba98c33e6c45da505a83f220c02df2f85c3810cd9ceb38"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Success</span></span></span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc13RpcCallStatus7SuccessE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Call was successful. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc13RpcCallStatus18ServerNotReachableE">
<span id="_CPPv3N6SilKit8Services3Rpc13RpcCallStatus18ServerNotReachableE"></span><span id="_CPPv2N6SilKit8Services3Rpc13RpcCallStatus18ServerNotReachableE"></span><span class="target" id="namespace_sil_kit_1_1_services_1_1_rpc_1a3b48d16da133323a38bba98c33e6c45dac14c3d09016f5187fcd7607bb993030f"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ServerNotReachable</span></span></span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc13RpcCallStatus18ServerNotReachableE" title="Permalink to this definition"></a><br /></dt>
<dd><p>No server matching the <a class="reference internal" href="#class_sil_kit_1_1_services_1_1_rpc_1_1_rpc_spec"><span class="std std-ref">RpcSpec</span></a> was found. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc13RpcCallStatus14UndefinedErrorE">
<span id="_CPPv3N6SilKit8Services3Rpc13RpcCallStatus14UndefinedErrorE"></span><span id="_CPPv2N6SilKit8Services3Rpc13RpcCallStatus14UndefinedErrorE"></span><span class="target" id="namespace_sil_kit_1_1_services_1_1_rpc_1a3b48d16da133323a38bba98c33e6c45da98570a3d51c80b5961c408f204e48cd1"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">UndefinedError</span></span></span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc13RpcCallStatus14UndefinedErrorE" title="Permalink to this definition"></a><br /></dt>
<dd><p>An unidentified error occured. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc13RpcCallStatus19InternalServerErrorE">
<span id="_CPPv3N6SilKit8Services3Rpc13RpcCallStatus19InternalServerErrorE"></span><span id="_CPPv2N6SilKit8Services3Rpc13RpcCallStatus19InternalServerErrorE"></span><span class="target" id="namespace_sil_kit_1_1_services_1_1_rpc_1a3b48d16da133323a38bba98c33e6c45daecbf01325f1c744e9d7bb586ac2eb5ed"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">InternalServerError</span></span></span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc13RpcCallStatus19InternalServerErrorE" title="Permalink to this definition"></a><br /></dt>
<dd><p>The Call lead to an internal RpcServer error. This might happen if no CallHandler was specified for the RpcServer. </p>
</dd></dl>

<dl class="cpp enumerator">
<dt class="sig sig-object cpp" id="_CPPv4N6SilKit8Services3Rpc13RpcCallStatus7TimeoutE">
<span id="_CPPv3N6SilKit8Services3Rpc13RpcCallStatus7TimeoutE"></span><span id="_CPPv2N6SilKit8Services3Rpc13RpcCallStatus7TimeoutE"></span><span class="target" id="namespace_sil_kit_1_1_services_1_1_rpc_1a3b48d16da133323a38bba98c33e6c45dac85a251cc457840f1e032f1b733e9398"></span><span class="k"><span class="pre">enumerator</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Timeout</span></span></span><a class="headerlink" href="#_CPPv4N6SilKit8Services3Rpc13RpcCallStatus7TimeoutE" title="Permalink to this definition"></a><br /></dt>
<dd><p>The Call did run into a timeout and was canceled. This might happen if a corresponding server crashed, ran into an error or took too long to answer the call. </p>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="advanced-usage-and-configuration">
<h2><a class="toc-backref" href="#id20">Advanced Usage and Configuration</a><a class="headerlink" href="#advanced-usage-and-configuration" title="Permalink to this heading"></a></h2>
<section id="function-name">
<h3><a class="toc-backref" href="#id21">Function Name</a><a class="headerlink" href="#function-name" title="Permalink to this heading"></a></h3>
<p>RPC clients and RPC servers provide a function name which is part of their <a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc7RpcSpecE" title="SilKit::Services::Rpc::RpcSpec"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">RpcSpec</span></code></a>.</p>
<p>Communication only takes place among RPC clients and RPC servers with the same function name.</p>
</section>
<section id="media-type">
<h3><a class="toc-backref" href="#id22">Media Type</a><a class="headerlink" href="#media-type" title="Permalink to this heading"></a></h3>
<p>Both RPC clients and RPC servers define a media type as part of their <a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc7RpcSpecE" title="SilKit::Services::Rpc::RpcSpec"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">RpcSpec</span></code></a>.
It is a meta description of the transmitted data in accordance to <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc2046">RFC2046</a> and should be used to provide information about the de-/serialization of the underlying user data.
Just like the function name, the media type has to match between RPC clients / RPC servers for communication to take place.
An empty string on an RPC client will match any other media type on a server.</p>
<p>When data is serialized using SIL Kit’s <a class="reference internal" href="serdes.html"><span class="doc">Data Serialization/Deserialization API</span></a>, the media type constant <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">MediaTypeRpc()</span></code> must be used.</p>
</section>
<section id="labels">
<h3><a class="toc-backref" href="#id23">Labels</a><a class="headerlink" href="#labels" title="Permalink to this heading"></a></h3>
<p>Both RPC clients and RPC servers can be annotated with string-based key-value pairs (labels) which can be either mandatory or optional.
In addition to the matching requirements given by topic and media type, RPC clients and RPC servers will only communicate if their labels match.</p>
<p>The labels are stored in the <a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc7RpcSpecE" title="SilKit::Services::Rpc::RpcSpec"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">RpcSpec</span></code></a>. A <a class="reference internal" href="common.html#_CPPv4N6SilKit8Services13MatchingLabelE" title="SilKit::Services::MatchingLabel"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">MatchingLabel</span></code></a> can be added via <a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc7RpcSpec8AddLabelERKN6SilKit8Services13MatchingLabelE" title="SilKit::Services::Rpc::RpcSpec::AddLabel"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">AddLabel()</span></code></a>, see the following code snippet:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">SilKit</span><span class="o">::</span><span class="n">Services</span><span class="o">::</span><span class="n">Rpc</span><span class="o">::</span><span class="n">RpcSpec</span><span class="w"> </span><span class="n">rpcSpec</span><span class="p">{</span><span class="s">&quot;OpenMirror&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;application/json&quot;</span><span class="p">};</span>
<span class="n">rpcSpec</span><span class="p">.</span><span class="n">AddLabel</span><span class="p">(</span><span class="s">&quot;Instance&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;FrontLeft&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">SilKit</span><span class="o">::</span><span class="n">Services</span><span class="o">::</span><span class="n">MatchingLabel</span><span class="o">::</span><span class="n">Kind</span><span class="o">::</span><span class="n">Optional</span><span class="p">);</span>
<span class="k">auto</span><span class="o">*</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">participant</span><span class="o">-&gt;</span><span class="n">CreateRpcClient</span><span class="p">(</span><span class="s">&quot;FrontLeftDoorMirrorPanel&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">rpcSpec</span><span class="p">,</span><span class="w"> </span><span class="n">callResultHandler</span><span class="p">);</span>
</pre></div>
</div>
<p>To communicate, RPC clients and RPC Servers must conform to the following matching rules:</p>
<ul class="simple">
<li><p>A mandatory label matches, if a label of the same key and value is found on the corresponding counterpart.</p></li>
<li><p>An optional label matches, if the label key does not exist on the counterpart or both its key and value are equal.</p></li>
</ul>
<p>The following table shows how RPC clients and RPC servers with matching topics and matching media type would
match corresponding to their labels. Note that the label matching is symmetric, so clients and servers
are interchangeable here.</p>
<table class="docutils align-default" id="id3">
<caption><span class="caption-number">Table 3 </span><span class="caption-text">Label combinations</span><a class="headerlink" href="#id3" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"><p>Server {“Instance”, “Left”, Optional}</p></th>
<th class="head"><p>Server {“Instance”, “Left”, Mandatory}</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Client {}</p></td>
<td><p>Match</p></td>
<td><p>No Match</p></td>
</tr>
<tr class="row-odd"><td><p>Client {“Instance”, “Left”, Optional}</p></td>
<td><p>Match</p></td>
<td><p>Match</p></td>
</tr>
<tr class="row-even"><td><p>Client {“Instance”, “Right”, Optional}</p></td>
<td><p>No Match</p></td>
<td><p>No Match</p></td>
</tr>
<tr class="row-odd"><td><p>Client {“Namespace”, “Car”, Optional}</p></td>
<td><p>Match</p></td>
<td><p>No Match</p></td>
</tr>
<tr class="row-even"><td><p>Client {“Namespace”, “Car”, Mandatory}</p></td>
<td><p>No Match</p></td>
<td><p>No Match</p></td>
</tr>
</tbody>
</table>
</section>
<section id="error-handling">
<h3><a class="toc-backref" href="#id24">Error handling</a><a class="headerlink" href="#error-handling" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>If using <a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc10IRpcClient4CallEN4Util4SpanIK7uint8_tEEPv" title="SilKit::Services::Rpc::IRpcClient::Call"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Call()</span></code></a> with no corresponding server available, the <code class="docutils literal notranslate"><span class="pre">CallReturnHandler</span></code> is triggered immediately with
<code class="docutils literal notranslate"><span class="pre">RpcCallStatus::ServerNotReachable</span></code>.</p></li>
<li><p><a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc10IRpcServer12SubmitResultEP14IRpcCallHandleN4Util4SpanIK7uint8_tEE" title="SilKit::Services::Rpc::IRpcServer::SubmitResult"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">SubmitResult()</span></code></a> must only be used with a valid call handle received in the <code class="docutils literal notranslate"><span class="pre">RpcHandler</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">RpcCallResultEvent::resultData</span></code> member is only valid if <code class="docutils literal notranslate"><span class="pre">callStatus</span> <span class="pre">==</span> <span class="pre">RpcCallStatus::Success</span></code>.</p></li>
<li><p>If the RPC server receives a call but does not have a valid call handler, the RPC client will receive an
<code class="docutils literal notranslate"><span class="pre">RpcCallResultEvent</span></code> with <code class="docutils literal notranslate"><span class="pre">callStatus</span> <span class="pre">==</span> <span class="pre">RpcCallStatus::InternalServerError</span></code>.</p></li>
<li><p>If the RpcServer does not reply within the specified timeout of <a class="reference internal" href="#_CPPv4N6SilKit8Services3Rpc10IRpcClient15CallWithTimeoutEN4Util4SpanIK7uint8_tEENSt6chrono11nanosecondsEPv" title="SilKit::Services::Rpc::IRpcClient::CallWithTimeout"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">CallWithTimeout()</span></code></a>, the CallReturnHandler is triggered
immediately with <code class="docutils literal notranslate"><span class="pre">RpcCallStatus::Timeout</span></code>.</p></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="pubsub.html" class="btn btn-neutral float-left" title="Data Publish/Subscribe API" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="serdes.html" class="btn btn-neutral float-right" title="Data Serialization/Deserialization API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024 Vector Informatik GmbH.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>